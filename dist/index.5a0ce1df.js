function e(e,n,t,s){Object.defineProperty(e,n,{get:t,set:s,enumerable:!0,configurable:!0})}function n(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},l={},a=t.parcelRequire4741;null==a&&((a=function(e){if(e in s)return s[e].exports;if(e in l){var n=l[e];delete l[e];var t={id:e,exports:{}};return s[e]=t,n.call(t.exports,t,t.exports),t.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,n){l[e]=n},t.parcelRequire4741=a),a.register("bhXxA",(function(n,t){var s,l;e(n.exports,"register",(()=>s),(e=>s=e)),e(n.exports,"resolve",(()=>l),(e=>l=e));var a={};s=function(e){for(var n=Object.keys(e),t=0;t<n.length;t++)a[n[t]]=e[n[t]]},l=function(e){var n=a[e];if(null==n)throw new Error("Could not resolve bundle with id "+e);return n}})),a.register("aWsC9",(function(n,t){var s;e(n.exports,"getBundleURL",(()=>s),(e=>s=e));var l={};function a(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}s=function(e){var n=l[e];return n||(n=function(){try{throw new Error}catch(n){var e=(""+n.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return a(e[2])}return"/"}(),l[e]=n),n}})),a("bhXxA").register(JSON.parse('{"3uGGr":"index.5a0ce1df.js","ljX8R":"favicon.b201ce9f.png","04Yz5":"avatar04.ba12779b.png","jkKBz":"arrow.653ae12a.svg","2t2no":"arrowback.a362293c.svg","csFjj":"paperclip.25f0941c.svg","1vCHw":"profilearrow.dcd8a1ec.svg","aGWhp":"search.bf112ee3.svg","kkkiR":"status-read.e848bc09.svg","kc1xZ":"threedots.2bc06b6a.svg","3bdOz":"index.0070abce.css","67m7Z":"index.c1cdaf2f.js","5gwz6":"index.1501ae38.css"}'));var o=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="'+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"auth-popup"):a,n))+'">\r\n    <div class='+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"auth-container"):a,n))+">\r\n        <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"auth-header"):a,n))+">Вход</div>\r\n        <form class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"form"):a,n))+">\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"labelLogin")||(null!=n?d(n,"labelLogin"):n))?o:c)===p?o.call(u,{name:"labelLogin",hash:{},data:l,loc:{start:{line:5,column:12},end:{line:5,column:30}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"inputLogin")||(null!=n?d(n,"inputLogin"):n))?o:c)===p?o.call(u,{name:"inputLogin",hash:{},data:l,loc:{start:{line:6,column:12},end:{line:6,column:30}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"labelPassword")||(null!=n?d(n,"labelPassword"):n))?o:c)===p?o.call(u,{name:"labelPassword",hash:{},data:l,loc:{start:{line:7,column:12},end:{line:7,column:33}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"inputPassword")||(null!=n?d(n,"inputPassword"):n))?o:c)===p?o.call(u,{name:"inputPassword",hash:{},data:l,loc:{start:{line:8,column:12},end:{line:8,column:33}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"errorMessage")||(null!=n?d(n,"errorMessage"):n))?o:c)===p?o.call(u,{name:"errorMessage",hash:{},data:l,loc:{start:{line:9,column:12},end:{line:9,column:32}}}):o)?a:"")+'\r\n            <div class="'+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"form-login-spacer"):a,n))+'">&nbsp;</div>\r\n            <div class="form-buttons">\r\n                '+(null!=(a=typeof(o=null!=(o=d(t,"buttonLogin")||(null!=n?d(n,"buttonLogin"):n))?o:c)===p?o.call(u,{name:"buttonLogin",hash:{},data:l,loc:{start:{line:12,column:16},end:{line:12,column:35}}}):o)?a:"")+"\r\n                "+(null!=(a=typeof(o=null!=(o=d(t,"buttonSignup")||(null!=n?d(n,"buttonSignup"):n))?o:c)===p?o.call(u,{name:"buttonSignup",hash:{},data:l,loc:{start:{line:13,column:16},end:{line:13,column:36}}}):o)?a:"")+"\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>\r\n"},useData:!0}),r=a("4rITg");var i=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o=null!=n?n:e.nullContext||{},r=e.hooks.helperMissing,i="function",u=e.escapeExpression,c=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<button class="'+u(typeof(a=null!=(a=c(t,"class")||(null!=n?c(n,"class"):n))?a:r)===i?a.call(o,{name:"class",hash:{},data:l,loc:{start:{line:1,column:15},end:{line:1,column:26}}}):a)+'">'+u(typeof(a=null!=(a=c(t,"text")||(null!=n?c(n,"text"):n))?a:r)===i?a.call(o,{name:"text",hash:{},data:l,loc:{start:{line:1,column:28},end:{line:1,column:38}}}):a)+"</button>"},useData:!0}),u=a("jHzaH");r=a("4rITg");class c extends u.default{constructor(e){super("button",e)}render(){return(0,r.default)(i,this.props)}}var p=n(a("kSwPE")).template({1:function(e,n,t,s,l){var a,o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return' value="'+e.escapeExpression("function"==typeof(a=null!=(a=o(t,"value")||(null!=n?o(n,"value"):n))?a:e.hooks.helperMissing)?a.call(null!=n?n:e.nullContext||{},{name:"value",hash:{},data:l,loc:{start:{line:3,column:8},end:{line:3,column:19}}}):a)+'"\r\n'},3:function(e,n,t,s,l){var a,o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return' data-validation="'+e.escapeExpression("function"==typeof(a=null!=(a=o(t,"validationType")||(null!=n?o(n,"validationType"):n))?a:e.hooks.helperMissing)?a.call(null!=n?n:e.nullContext||{},{name:"validationType",hash:{},data:l,loc:{start:{line:6,column:18},end:{line:6,column:38}}}):a)+'"\r\n'},5:function(e,n,t,s,l){var a,o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return' placeholder="'+e.escapeExpression("function"==typeof(a=null!=(a=o(t,"placeholder")||(null!=n?o(n,"placeholder"):n))?a:e.hooks.helperMissing)?a.call(null!=n?n:e.nullContext||{},{name:"placeholder",hash:{},data:l,loc:{start:{line:9,column:14},end:{line:9,column:31}}}):a)+'"\r\n'},7:function(e,n,t,s,l){var a,o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return' accept="'+e.escapeExpression("function"==typeof(a=null!=(a=o(t,"accept")||(null!=n?o(n,"accept"):n))?a:e.hooks.helperMissing)?a.call(null!=n?n:e.nullContext||{},{name:"accept",hash:{},data:l,loc:{start:{line:12,column:9},end:{line:12,column:21}}}):a)+'"\r\n'},compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=null!=n?n:e.nullContext||{},i=e.hooks.helperMissing,u="function",c=e.escapeExpression,p=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<input type="'+c(typeof(o=null!=(o=p(t,"type")||(null!=n?p(n,"type"):n))?o:i)===u?o.call(r,{name:"type",hash:{},data:l,loc:{start:{line:1,column:13},end:{line:1,column:23}}}):o)+'" class="'+c(typeof(o=null!=(o=p(t,"class")||(null!=n?p(n,"class"):n))?o:i)===u?o.call(r,{name:"class",hash:{},data:l,loc:{start:{line:1,column:32},end:{line:1,column:43}}}):o)+'" name="'+c(typeof(o=null!=(o=p(t,"name")||(null!=n?p(n,"name"):n))?o:i)===u?o.call(r,{name:"name",hash:{},data:l,loc:{start:{line:1,column:51},end:{line:1,column:61}}}):o)+'"\r\n'+(null!=(a=p(t,"if").call(r,null!=n?p(n,"value"):n,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l,loc:{start:{line:2,column:0},end:{line:4,column:7}}}))?a:"")+(null!=(a=p(t,"if").call(r,null!=n?p(n,"validationType"):n,{name:"if",hash:{},fn:e.program(3,l,0),inverse:e.noop,data:l,loc:{start:{line:5,column:0},end:{line:7,column:7}}}))?a:"")+(null!=(a=p(t,"if").call(r,null!=n?p(n,"placeholder"):n,{name:"if",hash:{},fn:e.program(5,l,0),inverse:e.noop,data:l,loc:{start:{line:8,column:0},end:{line:10,column:7}}}))?a:"")+(null!=(a=p(t,"if").call(r,null!=n?p(n,"accept"):n,{name:"if",hash:{},fn:e.program(7,l,0),inverse:e.noop,data:l,loc:{start:{line:11,column:0},end:{line:13,column:7}}}))?a:"")+">\r\n"},useData:!0});var d=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o=null!=n?n:e.nullContext||{},r=e.hooks.helperMissing,i="function",u=e.escapeExpression,c=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<textarea class="'+u(typeof(a=null!=(a=c(t,"class")||(null!=n?c(n,"class"):n))?a:r)===i?a.call(o,{name:"class",hash:{},data:l,loc:{start:{line:1,column:17},end:{line:1,column:28}}}):a)+'" name="'+u(typeof(a=null!=(a=c(t,"name")||(null!=n?c(n,"name"):n))?a:r)===i?a.call(o,{name:"name",hash:{},data:l,loc:{start:{line:1,column:36},end:{line:1,column:46}}}):a)+'" data-validation="'+u(typeof(a=null!=(a=c(t,"validationType")||(null!=n?c(n,"validationType"):n))?a:r)===i?a.call(o,{name:"validationType",hash:{},data:l,loc:{start:{line:1,column:65},end:{line:1,column:85}}}):a)+'" placeholder="'+u(typeof(a=null!=(a=c(t,"placeholder")||(null!=n?c(n,"placeholder"):n))?a:r)===i?a.call(o,{name:"placeholder",hash:{},data:l,loc:{start:{line:1,column:100},end:{line:1,column:117}}}):a)+'">'+u(typeof(a=null!=(a=c(t,"value")||(null!=n?c(n,"value"):n))?a:r)===i?a.call(o,{name:"value",hash:{},data:l,loc:{start:{line:1,column:119},end:{line:1,column:130}}}):a)+"</textarea>\r\n"},useData:!0});u=a("jHzaH"),r=a("4rITg");class h extends u.default{constructor(e){super("div",e)}render(){return"textarea"===this.props.type?(0,r.default)(d,this.props):(0,r.default)(p,this.props)}}var m=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o=null!=n?n:e.nullContext||{},r=e.hooks.helperMissing,i="function",u=e.escapeExpression,c=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="'+u(typeof(a=null!=(a=c(t,"class")||(null!=n?c(n,"class"):n))?a:r)===i?a.call(o,{name:"class",hash:{},data:l,loc:{start:{line:1,column:12},end:{line:1,column:23}}}):a)+'">'+u(typeof(a=null!=(a=c(t,"text")||(null!=n?c(n,"text"):n))?a:r)===i?a.call(o,{name:"text",hash:{},data:l,loc:{start:{line:1,column:25},end:{line:1,column:35}}}):a)+"</div>\n"},useData:!0});u=a("jHzaH"),r=a("4rITg");class f extends u.default{constructor(e){super("div",e)}render(){return(0,r.default)(m,this.props)}}var E=n(a("kSwPE")).template({1:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"        <div class="+i(r(null!=(a=null!=n?u(n,"styles"):n)?u(a,"chat-unread-count-container"):a,n))+">\r\n            <div class="+i(r(null!=(a=null!=n?u(n,"styles"):n)?u(a,"chat-unread-count"):a,n))+">"+i("function"==typeof(o=null!=(o=u(t,"unread_count")||(null!=n?u(n,"unread_count"):n))?o:e.hooks.helperMissing)?o.call(null!=n?n:e.nullContext||{},{name:"unread_count",hash:{},data:l,loc:{start:{line:9,column:54},end:{line:9,column:72}}}):o)+" </div>\r\n        </div>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"chat-info-container"):a,n))+">\r\n    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"chat-info"):a,n))+">\r\n        <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"chat-avatar"):a,n))+"><img class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"avatar-image"):a,n))+" src="+i(typeof(o=null!=(o=d(t,"avatar")||(null!=n?d(n,"avatar"):n))?o:c)===p?o.call(u,{name:"avatar",hash:{},data:l,loc:{start:{line:3,column:85},end:{line:3,column:97}}}):o)+" alt="+i(typeof(o=null!=(o=d(t,"imagesAlt")||(null!=n?d(n,"imagesAlt"):n))?o:c)===p?o.call(u,{name:"imagesAlt",hash:{},data:l,loc:{start:{line:3,column:102},end:{line:3,column:117}}}):o)+"></div>\r\n        <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"chat-name"):a,n))+">"+i(typeof(o=null!=(o=d(t,"title")||(null!=n?d(n,"title"):n))?o:c)===p?o.call(u,{name:"title",hash:{},data:l,loc:{start:{line:4,column:42},end:{line:4,column:53}}}):o)+"</div>\r\n        <time class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"chat-time"):a,n))+">"+i(typeof(o=null!=(o=d(t,"time")||(null!=n?d(n,"time"):n))?o:c)===p?o.call(u,{name:"time",hash:{},data:l,loc:{start:{line:5,column:43},end:{line:5,column:53}}}):o)+"</time>\r\n        <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"chat-last-message"):a,n))+">"+i(typeof(o=null!=(o=d(t,"text")||(null!=n?d(n,"text"):n))?o:c)===p?o.call(u,{name:"text",hash:{},data:l,loc:{start:{line:6,column:50},end:{line:6,column:60}}}):o)+"</div>\r\n"+(null!=(a=d(t,"if").call(u,null!=n?d(n,"unread_count"):n,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l,loc:{start:{line:7,column:8},end:{line:11,column:15}}}))?a:"")+"    </div>\r\n</div>\r\n"},useData:!0});u=a("jHzaH"),r=a("4rITg");class v extends u.default{constructor(e){super("div",e)}render(){return(0,r.default)(E,this.props)}}var g=n(a("kSwPE")).template({1:function(e,n,t,s,l){var a,o=null!=n?n:e.nullContext||{},r=e.hooks.helperMissing,i="function",u=e.escapeExpression,c=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'    <img class="'+u(typeof(a=null!=(a=c(t,"imageBeforeClass")||(null!=n?c(n,"imageBeforeClass"):n))?a:r)===i?a.call(o,{name:"imageBeforeClass",hash:{},data:l,loc:{start:{line:3,column:16},end:{line:3,column:38}}}):a)+'" src="'+u(typeof(a=null!=(a=c(t,"imageBeforeSrc")||(null!=n?c(n,"imageBeforeSrc"):n))?a:r)===i?a.call(o,{name:"imageBeforeSrc",hash:{},data:l,loc:{start:{line:3,column:45},end:{line:3,column:65}}}):a)+'"  alt="'+u(typeof(a=null!=(a=c(t,"imagesAlt")||(null!=n?c(n,"imagesAlt"):n))?a:r)===i?a.call(o,{name:"imagesAlt",hash:{},data:l,loc:{start:{line:3,column:73},end:{line:3,column:88}}}):a)+'">\r\n'},3:function(e,n,t,s,l){var a,o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return e.escapeExpression("function"==typeof(a=null!=(a=o(t,"text")||(null!=n?o(n,"text"):n))?a:e.hooks.helperMissing)?a.call(null!=n?n:e.nullContext||{},{name:"text",hash:{},data:l,loc:{start:{line:5,column:16},end:{line:5,column:26}}}):a)},5:function(e,n,t,s,l){var a,o=null!=n?n:e.nullContext||{},r=e.hooks.helperMissing,i="function",u=e.escapeExpression,c=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'    <img class="'+u(typeof(a=null!=(a=c(t,"imageAfterClass")||(null!=n?c(n,"imageAfterClass"):n))?a:r)===i?a.call(o,{name:"imageAfterClass",hash:{},data:l,loc:{start:{line:7,column:16},end:{line:7,column:37}}}):a)+'" src="'+u(typeof(a=null!=(a=c(t,"imageAfterSrc")||(null!=n?c(n,"imageAfterSrc"):n))?a:r)===i?a.call(o,{name:"imageAfterSrc",hash:{},data:l,loc:{start:{line:7,column:44},end:{line:7,column:63}}}):a)+'"  alt="'+u(typeof(a=null!=(a=c(t,"imagesAlt")||(null!=n?c(n,"imagesAlt"):n))?a:r)===i?a.call(o,{name:"imagesAlt",hash:{},data:l,loc:{start:{line:7,column:71},end:{line:7,column:86}}}):a)+'">\r\n'},compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=null!=n?n:e.nullContext||{},i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="'+e.escapeExpression("function"==typeof(o=null!=(o=i(t,"class")||(null!=n?i(n,"class"):n))?o:e.hooks.helperMissing)?o.call(r,{name:"class",hash:{},data:l,loc:{start:{line:1,column:12},end:{line:1,column:23}}}):o)+'">\r\n'+(null!=(a=i(t,"if").call(r,null!=n?i(n,"imageBeforeSrc"):n,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l,loc:{start:{line:2,column:4},end:{line:4,column:11}}}))?a:"")+"    "+(null!=(a=i(t,"if").call(r,null!=n?i(n,"text"):n,{name:"if",hash:{},fn:e.program(3,l,0),inverse:e.noop,data:l,loc:{start:{line:5,column:4},end:{line:5,column:33}}}))?a:"")+"\r\n"+(null!=(a=i(t,"if").call(r,null!=n?i(n,"imageAfterSrc"):n,{name:"if",hash:{},fn:e.program(5,l,0),inverse:e.noop,data:l,loc:{start:{line:6,column:4},end:{line:8,column:11}}}))?a:"")+"</div>\r\n"},useData:!0});u=a("jHzaH"),r=a("4rITg");class y extends u.default{constructor(e){super("div",e)}render(){return(0,r.default)(g,this.props)}}var b=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"            <div class="+i(r(null!=(a=null!=n?u(n,"styles"):n)?u(a,"profile-avatar-wrapper"):a,n))+">\r\n                "+(null!=(a="function"==typeof(o=null!=(o=u(t,"avatarImage")||(null!=n?u(n,"avatarImage"):n))?o:e.hooks.helperMissing)?o.call(null!=n?n:e.nullContext||{},{name:"avatarImage",hash:{},data:l,loc:{start:{line:2,column:16},end:{line:2,column:35}}}):o)?a:"")+"\r\n                <div class="+i(r(null!=(a=null!=n?u(n,"styles"):n)?u(a,"profile-change-avatar-container"):a,n))+">\r\n                    <p class="+i(r(null!=(a=null!=n?u(n,"styles"):n)?u(a,"profile-change-avatar-text"):a,n))+">Поменять аватар<p>\r\n                </div>\r\n            </div>\r\n"},useData:!0});u=a("jHzaH"),r=a("4rITg");class _{constructor(e){if(_.instance)return _.instance;this._data=e||{},_.instance=this}setData(e){Object.keys(e).forEach((n=>{this._data[n]=e[n]}))}addToken(e){let n=!0;this._data.chatTokens?this._data.chatTokens.forEach((t=>{t.id===e.id&&(n=!1,t.token=e.token)})):this._data.chatTokens=[],n&&this._data.chatTokens?.push(e)}getToken(e){this._data.chatTokens&&this._data.chatTokens.forEach((n=>{if(n.id===e)return n.token}))}getData(e){return e?this._data[e]:this._data}}var A=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o=null!=n?n:e.nullContext||{},r=e.hooks.helperMissing,i="function",u=e.escapeExpression,c=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<image class="'+u(typeof(a=null!=(a=c(t,"class")||(null!=n?c(n,"class"):n))?a:r)===i?a.call(o,{name:"class",hash:{},data:l,loc:{start:{line:1,column:14},end:{line:1,column:25}}}):a)+'" src="'+u(typeof(a=null!=(a=c(t,"src")||(null!=n?c(n,"src"):n))?a:r)===i?a.call(o,{name:"src",hash:{},data:l,loc:{start:{line:1,column:32},end:{line:1,column:41}}}):a)+'">'},useData:!0});u=a("jHzaH"),r=a("4rITg");class S extends u.default{constructor(e){super("image",e)}render(){return(0,r.default)(A,this.props)}}var T=a("2E9QK");const C={baseAPIUrl:"https://ya-praktikum.tech/api/v2",resourceUrl:"https://ya-praktikum.tech/api/v2/resources",websocketUrl:"wss://ya-praktikum.tech/ws/chats",monthsNames:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]};class w extends S{constructor(e){super(e),this.g.EventBus.on(T.default.EVENTS.ACTION_CHANGEAVATAR_SUCCEED,this.onChangeAvatarSucceed.bind(this))}onChangeAvatarSucceed(e){const n=JSON.parse(e.responseText);_.instance.setData({avatar:n.avatar}),this.setProps({src:C.resourceUrl+n.avatar})}}class N extends u.default{constructor(e){super("div",e)}render(){const e=_.instance.getData("avatar")?C.resourceUrl+_.instance.getData("avatar"):this.props.icons.user,n=new w({class:this.props.styles["profile-avatar-image"],src:e});return this._avatarImage=n,(0,r.default)(b,{avatarImage:n,...this.props})}}var I=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o=null!=n?n:e.nullContext||{},r=e.hooks.helperMissing,i="function",u=e.escapeExpression,c=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="'+u(typeof(a=null!=(a=c(t,"class")||(null!=n?c(n,"class"):n))?a:r)===i?a.call(o,{name:"class",hash:{},data:l,loc:{start:{line:1,column:12},end:{line:1,column:23}}}):a)+'">'+u(typeof(a=null!=(a=c(t,"text")||(null!=n?c(n,"text"):n))?a:r)===i?a.call(o,{name:"text",hash:{},data:l,loc:{start:{line:1,column:25},end:{line:1,column:35}}}):a)+"</div>"},useData:!0});u=a("jHzaH"),r=a("4rITg");class P extends u.default{constructor(e){super("div",e)}render(){return(0,r.default)(I,this.props)}}var k=n(a("kSwPE")).template({1:function(e,n,t,s,l){var a,o=null!=n?n:e.nullContext||{},r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<div\r\n"+(null!=(a=r(t,"if").call(o,null!=n?r(n,"self"):n,{name:"if",hash:{},fn:e.program(2,l,0),inverse:e.program(4,l,0),data:l,loc:{start:{line:3,column:0},end:{line:7,column:7}}}))?a:"")+">\r\n"+(null!=(a=r(t,"if").call(o,null!=n?r(n,"file"):n,{name:"if",hash:{},fn:e.program(6,l,0),inverse:e.noop,data:l,loc:{start:{line:9,column:8},end:{line:11,column:15}}}))?a:"")+(null!=(a=r(t,"if").call(o,null!=n?r(n,"text"):n,{name:"if",hash:{},fn:e.program(8,l,0),inverse:e.noop,data:l,loc:{start:{line:12,column:8},end:{line:14,column:15}}}))?a:"")+(null!=(a=r(t,"if").call(o,null!=n?r(n,"self"):n,{name:"if",hash:{},fn:e.program(10,l,0),inverse:e.program(13,l,0),data:l,loc:{start:{line:15,column:8},end:{line:24,column:15}}}))?a:"")+"    </div>\r\n"},2:function(e,n,t,s,l){var a,o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"class="+e.escapeExpression(e.lambda(null!=(a=null!=n?o(n,"styles"):n)?o(a,"conversation-self-message"):a,n))+"\r\n"},4:function(e,n,t,s,l){var a,o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"class="+e.escapeExpression(e.lambda(null!=(a=null!=n?o(n,"styles"):n)?o(a,"conversation-other-message"):a,n))+"\r\n"},6:function(e,n,t,s,l){var a,o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"        "+e.escapeExpression("function"==typeof(a=null!=(a=o(t,"file")||(null!=n?o(n,"file"):n))?a:e.hooks.helperMissing)?a.call(null!=n?n:e.nullContext||{},{name:"file",hash:{},data:l,loc:{start:{line:10,column:8},end:{line:10,column:18}}}):a)+"\r\n"},8:function(e,n,t,s,l){var a,o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"        "+e.escapeExpression("function"==typeof(a=null!=(a=o(t,"text")||(null!=n?o(n,"text"):n))?a:e.hooks.helperMissing)?a.call(null!=n?n:e.nullContext||{},{name:"text",hash:{},data:l,loc:{start:{line:13,column:8},end:{line:13,column:18}}}):a)+"\r\n"},10:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=null!=n?n:e.nullContext||{},c=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"        <div class="+i(r(null!=(a=null!=n?c(n,"styles"):n)?c(a,"conversation-self-message-status"):a,n))+">\r\n"+(null!=(a=c(t,"if").call(u,null!=n?c(n,"isRead"):n,{name:"if",hash:{},fn:e.program(11,l,0),inverse:e.noop,data:l,loc:{start:{line:17,column:12},end:{line:19,column:19}}}))?a:"")+"        <time class="+i(r(null!=(a=null!=n?c(n,"styles"):n)?c(a,"conversation-self-message-time"):a,n))+">"+i("function"==typeof(o=null!=(o=c(t,"time")||(null!=n?c(n,"time"):n))?o:e.hooks.helperMissing)?o.call(u,{name:"time",hash:{},data:l,loc:{start:{line:20,column:64},end:{line:20,column:74}}}):o)+"</time>\r\n        </div>\r\n"},11:function(e,n,t,s,l){var a,o,r=e.escapeExpression,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"            <img src="+r(e.lambda(null!=(a=null!=n?i(n,"icons"):n)?i(a,"status-read"):a,n))+'  alt="'+r("function"==typeof(o=null!=(o=i(t,"imagesAlt")||(null!=n?i(n,"imagesAlt"):n))?o:e.hooks.helperMissing)?o.call(null!=n?n:e.nullContext||{},{name:"imagesAlt",hash:{},data:l,loc:{start:{line:18,column:51},end:{line:18,column:66}}}):o)+'">\r\n'},13:function(e,n,t,s,l){var a,o,r=e.escapeExpression,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"        <div class="+r(e.lambda(null!=(a=null!=n?i(n,"styles"):n)?i(a,"conversation-other-message-time"):a,n))+">"+r("function"==typeof(o=null!=(o=i(t,"time")||(null!=n?i(n,"time"):n))?o:e.hooks.helperMissing)?o.call(null!=n?n:e.nullContext||{},{name:"time",hash:{},data:l,loc:{start:{line:23,column:64},end:{line:23,column:74}}}):o)+"</div>\r\n"},15:function(e,n,t,s,l){var a,o,r=e.escapeExpression,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"    <div class="+r(e.lambda(null!=(a=null!=n?i(n,"styles"):n)?i(a,"conversation-date"):a,n))+">"+r("function"==typeof(o=null!=(o=i(t,"date")||(null!=n?i(n,"date"):n))?o:e.hooks.helperMissing)?o.call(null!=n?n:e.nullContext||{},{name:"date",hash:{},data:l,loc:{start:{line:27,column:46},end:{line:27,column:56}}}):o)+"</div>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return null!=(a=o(t,"if").call(null!=n?n:e.nullContext||{},null!=n?o(n,"isMessage"):n,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.program(15,l,0),data:l,loc:{start:{line:1,column:0},end:{line:28,column:7}}}))?a:""},useData:!0});u=a("jHzaH"),r=a("4rITg");class D extends u.default{constructor(e){super("div",e)}render(){return(0,r.default)(k,this.props)}}var O=a("6PFVL");T=a("2E9QK");const x={login:/^[0-9a-zA-Z\-_]{3,}/,password:/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,40}$/,phone:/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s./0-9]*$/,email:/^[^\s@]+@[^\s@]+\.[\S]{2,}$/,name:/^[A-ZА-ЯЁ][а-яА-ЯёЁa-zA-Z-]+$/,title:/^.+$/,message:/.+/},V={name:"Введите корректное имя (латиница или кириллица, \n                  первая буква должна быть заглавной, без пробелов и цифр)",surname:"Введите корректную фамилию (латиница или кириллица,\n                   первая буква должна быть заглавной, без пробелов и цифр)",login:"Введите корректный логин (от 3 до 20 символов латиницы, \n          возможно содержание цифр, дефиса или нижнего подчёркивания)",password:"Введите корректный пароль (от 8 до 40 символов, обязательно \n              должна быть хотя бы одна заглавная буква и цифра)",phone:"Введите корректный номер телефона\n               (от 10 до 15 цифр, может начинаться с плюса)",email:"Введите корректный адрес электронной почты (латиница, может включать цифры и \n              спецсимволы, обязательно должна быть «собака» (@) и \n              точка после неё, но перед точкой обязательно должны быть буквы)",message:"Введите сообщение"};function L(e){const n=e.dataset.validation;if(console.log(n),!n||!(n in x))return{valid:!0};const t=x[n];if(e.value&&-1!==e.value.search(t))return{valid:!0};return{valid:!1,reason:V[n]}}function U(e){let n=!0,t={},s={};return e.forEach((e=>{const l=e.element;if(l.dataset.validation){const e=l.dataset.validation.split(",");if(t[l.name]={value:l.value,isValid:!0},a=l.value,o=e[0],-1===a.search(x[o])&&(n=!1,t[l.name].isValid=!1),e.length>1){const[n,t]=e[1].split("=");"name"===n&&(s[l.name]=t)}}var a,o})),Object.entries(s).forEach((([e,s])=>{t[e].value!==t[s].value&&(n=!1,t[e].isValid=!1)})),[n,t]}T=a("2E9QK"),u=a("jHzaH");class F extends u.default{}var B=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="'+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"auth-popup"):a,n))+'">\r\n    <div class='+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"auth-container"):a,n))+">\r\n        <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"auth-header"):a,n))+">Регистрация</div>\r\n        <form class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"form"):a,n))+">\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"labelEmail")||(null!=n?d(n,"labelEmail"):n))?o:c)===p?o.call(u,{name:"labelEmail",hash:{},data:l,loc:{start:{line:5,column:12},end:{line:5,column:30}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"inputEmail")||(null!=n?d(n,"inputEmail"):n))?o:c)===p?o.call(u,{name:"inputEmail",hash:{},data:l,loc:{start:{line:6,column:12},end:{line:6,column:30}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"labelLogin")||(null!=n?d(n,"labelLogin"):n))?o:c)===p?o.call(u,{name:"labelLogin",hash:{},data:l,loc:{start:{line:7,column:12},end:{line:7,column:30}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"inputLogin")||(null!=n?d(n,"inputLogin"):n))?o:c)===p?o.call(u,{name:"inputLogin",hash:{},data:l,loc:{start:{line:8,column:12},end:{line:8,column:30}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"labelFirstName")||(null!=n?d(n,"labelFirstName"):n))?o:c)===p?o.call(u,{name:"labelFirstName",hash:{},data:l,loc:{start:{line:9,column:12},end:{line:9,column:34}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"inputFirstName")||(null!=n?d(n,"inputFirstName"):n))?o:c)===p?o.call(u,{name:"inputFirstName",hash:{},data:l,loc:{start:{line:10,column:12},end:{line:10,column:34}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"labelSecondName")||(null!=n?d(n,"labelSecondName"):n))?o:c)===p?o.call(u,{name:"labelSecondName",hash:{},data:l,loc:{start:{line:11,column:12},end:{line:11,column:35}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"inputSecondName")||(null!=n?d(n,"inputSecondName"):n))?o:c)===p?o.call(u,{name:"inputSecondName",hash:{},data:l,loc:{start:{line:12,column:12},end:{line:12,column:35}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"labelPhone")||(null!=n?d(n,"labelPhone"):n))?o:c)===p?o.call(u,{name:"labelPhone",hash:{},data:l,loc:{start:{line:13,column:12},end:{line:13,column:30}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"inputPhone")||(null!=n?d(n,"inputPhone"):n))?o:c)===p?o.call(u,{name:"inputPhone",hash:{},data:l,loc:{start:{line:14,column:12},end:{line:14,column:30}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"labelPassword")||(null!=n?d(n,"labelPassword"):n))?o:c)===p?o.call(u,{name:"labelPassword",hash:{},data:l,loc:{start:{line:15,column:12},end:{line:15,column:33}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"inputPassword")||(null!=n?d(n,"inputPassword"):n))?o:c)===p?o.call(u,{name:"inputPassword",hash:{},data:l,loc:{start:{line:16,column:12},end:{line:16,column:33}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"labelPassword2")||(null!=n?d(n,"labelPassword2"):n))?o:c)===p?o.call(u,{name:"labelPassword2",hash:{},data:l,loc:{start:{line:17,column:12},end:{line:17,column:34}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"inputPassword2")||(null!=n?d(n,"inputPassword2"):n))?o:c)===p?o.call(u,{name:"inputPassword2",hash:{},data:l,loc:{start:{line:18,column:12},end:{line:18,column:34}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"errorMessage")||(null!=n?d(n,"errorMessage"):n))?o:c)===p?o.call(u,{name:"errorMessage",hash:{},data:l,loc:{start:{line:19,column:12},end:{line:19,column:32}}}):o)?a:"")+'\r\n            <div class="'+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"form-signup-spacer"):a,n))+'">&nbsp;</div>\r\n            <div class="form-buttons">\r\n                '+(null!=(a=typeof(o=null!=(o=d(t,"buttonSignup")||(null!=n?d(n,"buttonSignup"):n))?o:c)===p?o.call(u,{name:"buttonSignup",hash:{},data:l,loc:{start:{line:22,column:16},end:{line:22,column:36}}}):o)?a:"")+"\r\n                "+(null!=(a=typeof(o=null!=(o=d(t,"buttonLogin")||(null!=n?d(n,"buttonLogin"):n))?o:c)===p?o.call(u,{name:"buttonLogin",hash:{},data:l,loc:{start:{line:23,column:16},end:{line:23,column:35}}}):o)?a:"")+"\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>"},useData:!0});r=a("4rITg"),T=a("2E9QK");var $=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"chat-container"):a,n))+">\r\n    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"chat-left-container"):a,n))+'>\r\n        <div class="'+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-link-container"):a,n))+'">'+(null!=(a=typeof(o=null!=(o=d(t,"linkProfileOpen")||(null!=n?d(n,"linkProfileOpen"):n))?o:c)===p?o.call(u,{name:"linkProfileOpen",hash:{},data:l,loc:{start:{line:3,column:57},end:{line:3,column:80}}}):o)?a:"")+'</div>\r\n        <div class="'+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"search-container"):a,n))+'">\r\n            '+(null!=(a=typeof(o=null!=(o=d(t,"inputSearch")||(null!=n?d(n,"inputSearch"):n))?o:c)===p?o.call(u,{name:"inputSearch",hash:{},data:l,loc:{start:{line:5,column:12},end:{line:5,column:31}}}):o)?a:"")+"\r\n            <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"search-container-placeholder"):a,n))+">\r\n                <img class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"search-icon"):a,n))+" src="+i(r(null!=(a=null!=n?d(n,"icons"):n)?d(a,"search"):a,n))+'  alt="'+i(typeof(o=null!=(o=d(t,"imagesAlt")||(null!=n?d(n,"imagesAlt"):n))?o:c)===p?o.call(u,{name:"imagesAlt",hash:{},data:l,loc:{start:{line:7,column:81},end:{line:7,column:96}}}):o)+'"> Поиск\r\n            </div>\r\n        </div>\r\n        <div class="'+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"chat-infos-container"):a,n))+'">\r\n            '+(null!=(a=typeof(o=null!=(o=d(t,"chatInfos")||(null!=n?d(n,"chatInfos"):n))?o:c)===p?o.call(u,{name:"chatInfos",hash:{},data:l,loc:{start:{line:11,column:12},end:{line:11,column:29}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"linkAddChat")||(null!=n?d(n,"linkAddChat"):n))?o:c)===p?o.call(u,{name:"linkAddChat",hash:{},data:l,loc:{start:{line:12,column:12},end:{line:12,column:31}}}):o)?a:"")+'\r\n        </div>\r\n    </div>\r\n    <div id="conversation" class='+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"chat-right-container"):a,n))+">\r\n        <p class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"chat-stub"):a,n))+">Выберите чат чтобы отправить сообщение</p>\r\n    </div>\r\n</div>\r\n"},useData:!0}),M=(r=a("4rITg"),a("guyfn"));T=a("2E9QK");var R=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"modal-container"):a,n))+">\r\n    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"modal-popup"):a,n))+'>\r\n        <form method="post" class='+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"avatar-form"):a,n))+">\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"inputChooseFile")||(null!=n?d(n,"inputChooseFile"):n))?o:c)===p?o.call(u,{name:"inputChooseFile",hash:{},data:l,loc:{start:{line:4,column:12},end:{line:4,column:35}}}):o)?a:"")+"\r\n            <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"avatar-modal-header"):a,n))+">Загрузите файл</div>\r\n            <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"avatar-modal-choose-file-container"):a,n))+">\r\n                "+(null!=(a=typeof(o=null!=(o=d(t,"labelFileName")||(null!=n?d(n,"labelFileName"):n))?o:c)===p?o.call(u,{name:"labelFileName",hash:{},data:l,loc:{start:{line:7,column:16},end:{line:7,column:37}}}):o)?a:"")+"\r\n                "+(null!=(a=typeof(o=null!=(o=d(t,"linkChooseFile")||(null!=n?d(n,"linkChooseFile"):n))?o:c)===p?o.call(u,{name:"linkChooseFile",hash:{},data:l,loc:{start:{line:8,column:16},end:{line:8,column:38}}}):o)?a:"")+"\r\n            </div>\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"buttonChange")||(null!=n?d(n,"buttonChange"):n))?o:c)===p?o.call(u,{name:"buttonChange",hash:{},data:l,loc:{start:{line:10,column:12},end:{line:10,column:32}}}):o)?a:"")+"\r\n        </form>\r\n    </div>\r\n</div>\r\n"},useData:!0});r=a("4rITg"),T=a("2E9QK");class H extends F{constructor(e){super("div",{...e,events:{click:e=>this.hideModal(e)}}),this.g.EventBus.on(T.default.EVENTS.ACTION_CHANGEAVATAR_FAILED,this.onChangeAvatarFailed.bind(this))}onChangeAvatarFailed(e){console.log(e)}hideModal(e){const n=e.target;if(!n)return!1;n.classList.contains(this.props.styles["modal-container"])&&this.hide()}render(){const e=new f({}),n=new h({type:"file",class:this.props.styles.hidden,name:"avatar_file",accept:"image/png, image/jpeg",events:{change:n=>{const t=n.currentTarget;t&&t.files&&(console.log(t.files[0].name),e.setProps({text:t.files[0].name,class:this.props.styles["avatar-modal-file"]}))}}}),t=new y({text:"Выбрать файл на компьютере",class:`${this.props.styles.link} ${this.props.styles["avatar-modal-choose-file"]}`,events:{click:()=>{document.querySelector("[type=file]")?.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}}}),s=new c({text:"Поменять",class:`${this.props.styles.button} ${this.props.styles["avatar-modal-change-avatar"]}`,events:{click:e=>{e.preventDefault();const t=new FormData,s=n.element;if(console.log(s.files),s.files){t.append("avatar",s.files[0]);try{this.g.EventBus.emit(T.default.EVENTS.ACTION_CHANGEAVATAR,t)}catch(e){console.log(e)}}}}});return(0,r.default)(R,{labelFileName:e,linkChooseFile:t,inputChooseFile:n,buttonChange:s,...this.props})}}var G=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"modal-container"):a,n))+">\r\n    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"modal-popup"):a,n))+'>\r\n        <form method="post" class='+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"create-chat-form"):a,n))+">\r\n            <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"avatar-modal-header"):a,n))+">Создать новый чат:</div>\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"inputChatName")||(null!=n?d(n,"inputChatName"):n))?o:c)===p?o.call(u,{name:"inputChatName",hash:{},data:l,loc:{start:{line:5,column:12},end:{line:5,column:33}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"errorMessage")||(null!=n?d(n,"errorMessage"):n))?o:c)===p?o.call(u,{name:"errorMessage",hash:{},data:l,loc:{start:{line:6,column:12},end:{line:6,column:32}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"buttonCreate")||(null!=n?d(n,"buttonCreate"):n))?o:c)===p?o.call(u,{name:"buttonCreate",hash:{},data:l,loc:{start:{line:7,column:12},end:{line:7,column:32}}}):o)?a:"")+"\r\n        </form>\r\n    </div>\r\n</div>\r\n"},useData:!0});r=a("4rITg"),T=a("2E9QK");class j extends F{constructor(e){super("div",{...e,events:{click:e=>this.hideModal(e)}}),this.g.EventBus.on(T.default.EVENTS.VALIDATE_CREATECHAT_FAILED,this._onValidateCreateChatFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_CREATECHAT_FAILED,this._onActionCreateChatFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_CREATECHAT_SUCCEED,this._onActionCreateChatSucceed.bind(this))}_onValidateCreateChatFailed(e){throw Object.keys(e).forEach((n=>{if(!e[n].isValid){const e=document.querySelector(`input[name=${n}]`);e?.classList.add(this.props.styles["input-error"])}})),new Error("Validation Error")}_onActionCreateChatFailed(e){const n=JSON.parse(e).reason;this._errorMessage.setProps({text:n,class:this.props.styles.error}),console.log("Error on create chat: ",n)}_onActionCreateChatSucceed(){this.hide()}hideModal(e){const n=e.target;if(!n)return!1;n.classList.contains(this.props.styles["modal-container"])&&this.hide()}render(){const e=new h({type:"text",class:`${this.props.styles.input}`,name:"title",validationType:"title",placeholder:"Название чата"}),n=new P({text:"",class:this.props.styles.error}),t=new c({text:"Создать",class:`${this.props.styles.button} ${this.props.styles["signup-form-button-primary"]} ${this.props.styles["create-chat-button"]}`,events:{click:n=>{n.preventDefault();const t=[e];try{this.g.EventBus.emit(T.default.EVENTS.VALIDATE_CREATECHAT,t),this.g.EventBus.emit(T.default.EVENTS.ACTION_CREATECHAT,t),this.g.EventBus.emit(T.default.EVENTS.ACTION_GETCHATS)}catch(e){console.log("Error: ",e)}}}});return this._errorMessage=n,(0,r.default)(G,{inputChatName:e,errorMessage:n,buttonCreate:t,...this.props})}}var W=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"modal-container"):a,n))+">\r\n    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"modal-popup-small"):a,n))+">\r\n\r\n        "+(null!=(a=typeof(o=null!=(o=d(t,"linkAddChatUser")||(null!=n?d(n,"linkAddChatUser"):n))?o:c)===p?o.call(u,{name:"linkAddChatUser",hash:{},data:l,loc:{start:{line:4,column:8},end:{line:4,column:31}}}):o)?a:"")+"\r\n        "+(null!=(a=typeof(o=null!=(o=d(t,"linkDeleteChatUser")||(null!=n?d(n,"linkDeleteChatUser"):n))?o:c)===p?o.call(u,{name:"linkDeleteChatUser",hash:{},data:l,loc:{start:{line:5,column:8},end:{line:5,column:34}}}):o)?a:"")+"\r\n        "+(null!=(a=typeof(o=null!=(o=d(t,"linkDeleteChat")||(null!=n?d(n,"linkDeleteChat"):n))?o:c)===p?o.call(u,{name:"linkDeleteChat",hash:{},data:l,loc:{start:{line:6,column:8},end:{line:6,column:30}}}):o)?a:"")+"        \r\n    </div>\r\n</div>\r\n"},useData:!0});r=a("4rITg"),M=a("guyfn");var K=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"modal-container"):a,n))+">\r\n    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"modal-popup"):a,n))+'>\r\n        <form method="post" class='+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"add-user-form"):a,n))+">\r\n            <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"avatar-modal-header"):a,n))+">Добавить пользователя в чат:</div>\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"inputUserLogin")||(null!=n?d(n,"inputUserLogin"):n))?o:c)===p?o.call(u,{name:"inputUserLogin",hash:{},data:l,loc:{start:{line:5,column:12},end:{line:5,column:34}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"errorMessage")||(null!=n?d(n,"errorMessage"):n))?o:c)===p?o.call(u,{name:"errorMessage",hash:{},data:l,loc:{start:{line:6,column:12},end:{line:6,column:32}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"buttonAdd")||(null!=n?d(n,"buttonAdd"):n))?o:c)===p?o.call(u,{name:"buttonAdd",hash:{},data:l,loc:{start:{line:7,column:12},end:{line:7,column:29}}}):o)?a:"")+"\r\n        </form>\r\n    </div>\r\n</div>\r\n"},useData:!0});r=a("4rITg"),T=a("2E9QK");class J extends F{constructor(e){super("div",{...e,events:{click:e=>this.hideModal(e)}}),this.g.EventBus.on(T.default.EVENTS.VALIDATE_ADDCHATUSER_FAILED,this._onValidateAddChatUserFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_ADDFINDUSER_FAILED,this._onActionFindUserFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_ADDFINDUSER_SUCCEED,this._onActionFindUserSucceed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_ADDCHATUSER_FAILED,this._onActionAddChatUserFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_ADDCHATUSER_SUCCEED,this._onActionAddChatUserSucceed.bind(this))}_onValidateAddChatUserFailed(e){throw Object.keys(e).forEach((n=>{if(!e[n].isValid){const e=document.querySelector(`input[name=${n}]`);e?.classList.add(this.props.styles["input-error"])}})),new Error("Validation Error")}_onActionFindUserFailed(e){console.log("Got data: ",JSON.parse(e));const n=JSON.parse(e).reason;this._errorMessage.setProps({text:n,class:this.props.styles.error}),console.log("Error on find user: ",n)}_onActionFindUserSucceed(e){console.log("_onActionFindUserSucceed (add user): ",e),this.g.EventBus.emit(T.default.EVENTS.ACTION_ADDCHATUSER,{userId:e.id,chatId:this.props.chatId}),this.g.EventBus.emit(T.default.EVENTS.ACTION_GETCHATUSERS,this.props.chatId)}_onActionAddChatUserFailed(e){const n=JSON.parse(e).reason;this._errorMessage.setProps({text:n,class:this.props.styles.error}),console.log("Error on add chat user: ",n)}_onActionAddChatUserSucceed(){this._errorMessage.setProps({text:"User added",class:this.props.styles.error})}hideModal(e){const n=e.target;if(!n)return!1;n.classList.contains(this.props.styles["modal-container"])&&this.hide()}render(){const e=new h({type:"text",class:`${this.props.styles.input}`,name:"login",validationType:"login",placeholder:"Логин пользователя"}),n=new P({text:"",class:this.props.styles.error}),t=new c({text:"Добавить",class:`${this.props.styles.button} ${this.props.styles["signup-form-button-primary"]} ${this.props.styles["add-user-button"]}`,events:{click:n=>{n.preventDefault(),this._errorMessage.setProps({text:"",class:this.props.styles.error});const t=[e];try{this.g.EventBus.emit(T.default.EVENTS.VALIDATE_ADDCHATUSER,t),this.g.EventBus.emit(T.default.EVENTS.ACTION_FINDUSER,t,{succeedEvent:T.default.EVENTS.ACTION_ADDFINDUSER_SUCCEED,failedEvent:T.default.EVENTS.ACTION_ADDFINDUSER_FAILED})}catch(e){console.log("Error: ",e)}}}});return this._errorMessage=n,(0,r.default)(K,{inputUserLogin:e,errorMessage:n,buttonAdd:t,...this.props})}}var Q=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"modal-container"):a,n))+">\r\n    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"modal-popup"):a,n))+'>\r\n        <form method="post" class='+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"delete-user-form"):a,n))+">\r\n            <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"avatar-modal-header"):a,n))+">Удалить пользователя из чата:</div>\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"inputUserLogin")||(null!=n?d(n,"inputUserLogin"):n))?o:c)===p?o.call(u,{name:"inputUserLogin",hash:{},data:l,loc:{start:{line:5,column:12},end:{line:5,column:34}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"errorMessage")||(null!=n?d(n,"errorMessage"):n))?o:c)===p?o.call(u,{name:"errorMessage",hash:{},data:l,loc:{start:{line:6,column:12},end:{line:6,column:32}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"buttonDelete")||(null!=n?d(n,"buttonDelete"):n))?o:c)===p?o.call(u,{name:"buttonDelete",hash:{},data:l,loc:{start:{line:7,column:12},end:{line:7,column:32}}}):o)?a:"")+"\r\n        </form>\r\n    </div>\r\n</div>\r\n"},useData:!0});r=a("4rITg"),T=a("2E9QK");class z extends F{constructor(e){super("div",{...e,events:{click:e=>this.hideModal(e)}}),this.g.EventBus.on(T.default.EVENTS.VALIDATE_DELETECHATUSER_FAILED,this._onValidateDeleteChatUserFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_DELETEFINDUSER_FAILED,this._onActionFindUserFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_DELETEFINDUSER_SUCCEED,this._onActionFindUserSucceed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_DELETECHATUSER_FAILED,this._onActionDeleteChatUserFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_DELETECHATUSER_SUCCEED,this._onActionDeleteChatUserSucceed.bind(this))}_onValidateDeleteChatUserFailed(e){throw Object.keys(e).forEach((n=>{if(!e[n].isValid){const e=document.querySelector(`input[name=${n}]`);e?.classList.add(this.props.styles["input-error"])}})),new Error("Validation Error")}_onActionFindUserFailed(e){console.log("Got data: ",JSON.parse(e));const n=JSON.parse(e).reason;this._errorMessage.setProps({text:n,class:this.props.styles.error}),console.log("Error on find user: ",n)}_onActionFindUserSucceed(e){console.log("_onActionFindUserSucceed (delete user): ",e),this.g.EventBus.emit(T.default.EVENTS.ACTION_DELETECHATUSER,{userId:e.id,chatId:this.props.chatId}),this.g.EventBus.emit(T.default.EVENTS.ACTION_GETCHATUSERS,this.props.chatId)}_onActionDeleteChatUserFailed(e){const n=JSON.parse(e).reason;this._errorMessage.setProps({text:n,class:this.props.styles.error}),console.log("Error on add chat user: ",n)}_onActionDeleteChatUserSucceed(){this._errorMessage.setProps({text:"User deleted",class:this.props.styles.error})}hideModal(e){const n=e.target;if(!n)return!1;n.classList.contains(this.props.styles["modal-container"])&&this.hide()}render(){const e=new h({type:"text",class:`${this.props.styles.input}`,name:"login",validationType:"login",placeholder:"Логин пользователя"}),n=new P({text:"",class:this.props.styles.error}),t=new c({text:"Удалить",class:`${this.props.styles.button} ${this.props.styles["signup-form-button-primary"]} ${this.props.styles["delete-user-button"]}`,events:{click:n=>{n.preventDefault(),this._errorMessage.setProps({text:"",class:this.props.styles.error});const t=[e];try{this.g.EventBus.emit(T.default.EVENTS.VALIDATE_DELETECHATUSER,t),this.g.EventBus.emit(T.default.EVENTS.ACTION_FINDUSER,t,{succeedEvent:T.default.EVENTS.ACTION_DELETEFINDUSER_SUCCEED,failedEvent:T.default.EVENTS.ACTION_DELETEFINDUSER_FAILED})}catch(e){console.log("Error: ",e)}}}});return this._errorMessage=n,(0,r.default)(Q,{inputUserLogin:e,errorMessage:n,buttonDelete:t,...this.props})}}var q=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"modal-container"):a,n))+">\r\n    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"modal-popup"):a,n))+">\r\n            <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"avatar-modal-header"):a,n))+">Вы уверены?</div>\r\n            <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"confirm-spacer"):a,n))+">&nbsp;</div>\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"buttonConfirm")||(null!=n?d(n,"buttonConfirm"):n))?o:c)===p?o.call(u,{name:"buttonConfirm",hash:{},data:l,loc:{start:{line:5,column:12},end:{line:5,column:33}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"buttonCancel")||(null!=n?d(n,"buttonCancel"):n))?o:c)===p?o.call(u,{name:"buttonCancel",hash:{},data:l,loc:{start:{line:6,column:12},end:{line:6,column:32}}}):o)?a:"")+"\r\n        </form>\r\n    </div>\r\n</div>\r\n"},useData:!0});r=a("4rITg"),T=a("2E9QK"),M=a("guyfn");class X extends F{constructor(e){super("div",{...e,events:{click:e=>this.hideModal(e)}}),this.g.EventBus.on(T.default.EVENTS.ACTION_DELETECHAT_SUCCEED,this._onActionDeleteChatSucceed.bind(this))}_onActionDeleteChatSucceed(){this.g.EventBus.emit(T.default.EVENTS.ACTION_GETCHATS);const e=new f({text:"Выберите чат чтобы отправить сообщение",class:this.props.styles["chat-stub"]});(0,M.renderDOM)("#conversation",e),this.hide()}hideModal(e){const n=e.target;if(!n)return!1;n.classList.contains(this.props.styles["modal-container"])&&this.hide()}render(){const e=new P({text:"",class:this.props.styles.error}),n=new c({text:"Подтвердить",class:`${this.props.styles.button} ${this.props.styles["signup-form-button-primary"]}`,events:{click:e=>{e.preventDefault(),this._errorMessage.setProps({text:"",class:this.props.styles.error});try{this.g.EventBus.emit(T.default.EVENTS.ACTION_DELETECHAT,this.props.chatId)}catch(e){console.log("Error: ",e)}}}}),t=new c({text:"Отменить",class:`${this.props.styles.button} ${this.props.styles["signup-form-button-secondary"]}`,events:{click:e=>{e.preventDefault(),this.hide()}}});return this._errorMessage=e,(0,r.default)(q,{errorMessage:e,buttonConfirm:n,buttonCancel:t,...this.props})}}class Z extends F{constructor(e){super("div",{...e,events:{click:e=>this.hideModal(e)}})}hideModal(e){const n=e.target;if(!n)return!1;n.classList.contains(this.props.styles["modal-container"])&&this.hide()}render(){const e=new y({class:`${this.props.styles.link} ${this.props.styles["chat-actions-element"]}`,imageBeforeSrc:this.props.icons.adduser,imageBeforeClass:this.props.styles["chat-actions-icon"],text:"Добавить пользователя",events:{click:()=>{const e=new J(this.props);(0,M.renderDOM)("#modal",e)}}}),n=new y({class:`${this.props.styles.link} ${this.props.styles["chat-actions-element"]}`,imageBeforeSrc:this.props.icons.deleteuser,imageBeforeClass:this.props.styles["chat-actions-icon"],text:"Удалить пользователя",events:{click:()=>{const e=new z(this.props);(0,M.renderDOM)("#modal",e)}}}),t=new y({class:`${this.props.styles.link} ${this.props.styles["chat-actions-element"]}`,imageBeforeSrc:this.props.icons.deletechat,imageBeforeClass:this.props.styles["chat-actions-icon"],text:"Удалить чат",events:{click:()=>{const e=new X(this.props);(0,M.renderDOM)("#modal",e)}}});return(0,r.default)(W,{linkAddChatUser:e,linkDeleteChatUser:n,linkDeleteChat:t,...this.props})}}var Y=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"conversation-container"):a,n))+">\r\n<div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"conversation-header"):a,n))+">\r\n    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"conversation-avatar-container"):a,n))+">\r\n        "+(null!=(a=typeof(o=null!=(o=d(t,"chatUsers")||(null!=n?d(n,"chatUsers"):n))?o:c)===p?o.call(u,{name:"chatUsers",hash:{},data:l,loc:{start:{line:4,column:8},end:{line:4,column:25}}}):o)?a:"")+"\r\n    </div>\r\n    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"conversation-actions-container"):a,n))+">\r\n        "+(null!=(a=typeof(o=null!=(o=d(t,"conversationActionsLink")||(null!=n?d(n,"conversationActionsLink"):n))?o:c)===p?o.call(u,{name:"conversationActionsLink",hash:{},data:l,loc:{start:{line:7,column:8},end:{line:7,column:39}}}):o)?a:"")+"\r\n    </div>\r\n\r\n</div>\r\n<div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"conversation-body-container"):a,n))+">\r\n    "+(null!=(a=typeof(o=null!=(o=d(t,"messages")||(null!=n?d(n,"messages"):n))?o:c)===p?o.call(u,{name:"messages",hash:{},data:l,loc:{start:{line:12,column:4},end:{line:12,column:20}}}):o)?a:"")+"\r\n</div>\r\n<div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"conversation-footer"):a,n))+">\r\n    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"attach-button-container"):a,n))+">\r\n        <img class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"attach-button"):a,n))+" src="+i(r(null!=(a=null!=n?d(n,"icons"):n)?d(a,"paperclip"):a,n))+' alt="'+i(typeof(o=null!=(o=d(t,"imagesAlt")||(null!=n?d(n,"imagesAlt"):n))?o:c)===p?o.call(u,{name:"imagesAlt",hash:{},data:l,loc:{start:{line:16,column:77},end:{line:16,column:92}}}):o)+'">\r\n    </div>\r\n    <div class='+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"conversation-message-box"):a,n))+">\r\n        "+(null!=(a=typeof(o=null!=(o=d(t,"inputMessage")||(null!=n?d(n,"inputMessage"):n))?o:c)===p?o.call(u,{name:"inputMessage",hash:{},data:l,loc:{start:{line:19,column:8},end:{line:19,column:28}}}):o)?a:"")+"\r\n    </div>\r\n    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"arrow-button-container"):a,n))+">\r\n        "+(null!=(a=typeof(o=null!=(o=d(t,"linkSend")||(null!=n?d(n,"linkSend"):n))?o:c)===p?o.call(u,{name:"linkSend",hash:{},data:l,loc:{start:{line:22,column:8},end:{line:22,column:24}}}):o)?a:"")+" \r\n    </div>\r\n</div>\r\n</div>\r\n"},useData:!0});r=a("4rITg"),O=a("6PFVL"),T=a("2E9QK"),M=a("guyfn");class ee extends F{constructor(e){super("div",e),this.g.EventBus.on(T.default.EVENTS.MESSAGES_RECEIVED,this._onMessagesReceived.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_GETCHATUSERS_SUCCEED,this._onGetChatUsersSucceed.bind(this)),this.g.EventBus.on(T.default.EVENTS.VALIDATE_SENDMESSAGE_FAILED,this._onValidateSendMessageFailed.bind(this)),this._messages=[]}_onGetChatUsersSucceed(e){const{users:n}=e,t=[];n.forEach((e=>{let n=this.props.icons.user;e.avatar&&(n=C.resourceUrl+e.avatar),console.log(n);const s=e.display_name?e.display_name:`${e.first_name} ${e.second_name}`;t.push(new S({src:n,class:this.props.styles["avatar-image"]})),t.push(new f({text:s,class:this.props.styles["conversation-user-name"]}))})),this.setProps({chatUsers:t})}_onValidateSendMessageFailed(e){throw Object.keys(e).forEach((n=>{if(!e[n].isValid){const e=document.querySelector(`input[name=${n}]`);e?.classList.add(this.props.styles["input-error"])}})),new Error("Validation Error")}_onMessagesReceived(e){const n=JSON.parse(e);let t;if(n instanceof Array)n.reverse(),n.forEach((e=>{const n=new Date(e.time);t&&t.toLocaleDateString()===n.toLocaleDateString()||this._messages.push(new D({isMessage:!1,date:`${n.getDate()} ${C.monthsNames[n.getMonth()]}`,styles:this.props.styles})),t=n;const s=`${n.getHours()}:${n.getMinutes()}`,l=_.instance.getData("id")==e.user_id;this._messages.push(new D({isMessage:!0,styles:this.props.styles,icons:this.props.icons,text:e.content,time:s,isRead:e.is_read,file:e.file,self:l}))})),this.setProps({messages:this._messages});else if("message"===n.type){const e=new Date(n.time),t=`${e.getHours()}:${e.getMinutes()}`,s=_.instance.getData("id")==n.user_id;this._messages.push(new D({isMessage:!0,styles:this.props.styles,icons:this.props.icons,text:n.content,time:t,isRead:n.is_read,file:n.file,self:s})),this.setProps({messages:this._messages})}}render(){const e=new S({src:this.props.icons.threedots,class:this.props.styles["actions-button"],events:{click:()=>{(0,M.renderDOM)("#modal",new Z(this.props))}}}),n=new h({type:"textarea",class:`${this.props.styles.input} ${this.props.styles["input-conversation-message-box"]}`,name:"message",validationType:"message",placeholder:"Сообщение"}),t=new y({class:this.props.styles["arrow-button"],imageBeforeClass:this.props.styles["send-button"],imageBeforeSrc:this.props.icons.arrow,imagesAlt:"Отправить сообщение",events:{click:()=>{const e=[n],t={};let s=!0;if(e.map((e=>{const n=e.element,l=L(n);if(l.valid){const e=n.getAttribute("name"),{value:s}=n;e&&(t[e]=s),n.classList.remove(this.props.styles["input-error"]);const l=n.nextElementSibling;l&&l.parentNode&&l instanceof O.ErrorInput&&l.parentNode.removeChild(l)}else{s=!1,n.classList.add(this.props.styles["input-error"]);const e=n.nextElementSibling;e&&e.parentNode&&e instanceof O.ErrorInput&&e.parentNode.removeChild(e);const t=new(0,O.ErrorInput)({text:l.reason,class:this.props.styles["input-error"]});n.insertAdjacentElement("afterend",t.getContent())}})),s)try{this.g.EventBus.emit(T.default.EVENTS.VALIDATE_SENDMESSAGE,e),this.g.EventBus.emit(T.default.EVENTS.ACTION_SENDMESSAGE,e)}catch(e){console.log("Error on send message: ",e)}}}});return(0,r.default)(Y,{conversationActionsLink:e,inputMessage:n,chatUsers:[],messages:[],linkSend:t,...this.props})}}var ne=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="'+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-container"):a,n))+'">\r\n    <div class='+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-return"):a,n))+">\r\n        <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"arrow-button-container"):a,n))+">\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"linkProfileReturn")||(null!=n?d(n,"linkProfileReturn"):n))?o:c)===p?o.call(u,{name:"linkProfileReturn",hash:{},data:l,loc:{start:{line:4,column:12},end:{line:4,column:37}}}):o)?a:"")+"\r\n        </div>\r\n    </div>\r\n\r\n    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-container"):a,n))+">\r\n        <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info"):a,n))+">\r\n            <div>\r\n                "+(null!=(a=typeof(o=null!=(o=d(t,"changeAvatar")||(null!=n?d(n,"changeAvatar"):n))?o:c)===p?o.call(u,{name:"changeAvatar",hash:{},data:l,loc:{start:{line:11,column:16},end:{line:11,column:36}}}):o)?a:"")+"\r\n            </div>\r\n            <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-display-name"):a,n))+">"+i(r(null!=(a=null!=n?d(n,"user"):n)?d(a,"display_name"):a,n))+"</div>\r\n            <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-fields-container"):a,n))+">\r\n                <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field"):a,n))+">\r\n                    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field-name"):a,n))+">Почта</div>\r\n                    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field-value"):a,n))+">"+i(r(null!=(a=null!=n?d(n,"user"):n)?d(a,"email"):a,n))+"</div>\r\n                </div>\r\n                <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field"):a,n))+">\r\n                    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field-name"):a,n))+">Логин</div>\r\n                    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field-value"):a,n))+">"+i(r(null!=(a=null!=n?d(n,"user"):n)?d(a,"login"):a,n))+"</div>\r\n                </div>\r\n                <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field"):a,n))+">\r\n                    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field-name"):a,n))+">Имя</div>\r\n                    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field-value"):a,n))+">"+i(r(null!=(a=null!=n?d(n,"user"):n)?d(a,"first_name"):a,n))+"</div>\r\n                </div>\r\n                <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field"):a,n))+">\r\n                    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field-name"):a,n))+">Фамилия</div>\r\n                    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field-value"):a,n))+">"+i(r(null!=(a=null!=n?d(n,"user"):n)?d(a,"second_name"):a,n))+"</div>\r\n                </div>\r\n                <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field"):a,n))+">\r\n                    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field-name"):a,n))+">Имя в чате</div>\r\n                    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field-value"):a,n))+">"+i(r(null!=(a=null!=n?d(n,"user"):n)?d(a,"display_name"):a,n))+"</div>\r\n                </div>\r\n                <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field"):a,n))+">\r\n                    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field-name"):a,n))+">Телефон</div>\r\n                    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field-value"):a,n))+">"+i(r(null!=(a=null!=n?d(n,"user"):n)?d(a,"phone"):a,n))+"</div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-link"):a,n))+">\r\n                "+(null!=(a=typeof(o=null!=(o=d(t,"linkChangeInfo")||(null!=n?d(n,"linkChangeInfo"):n))?o:c)===p?o.call(u,{name:"linkChangeInfo",hash:{},data:l,loc:{start:{line:43,column:16},end:{line:43,column:38}}}):o)?a:"")+"\r\n            </div>\r\n            <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-link"):a,n))+">\r\n                "+(null!=(a=typeof(o=null!=(o=d(t,"linkChangePassword")||(null!=n?d(n,"linkChangePassword"):n))?o:c)===p?o.call(u,{name:"linkChangePassword",hash:{},data:l,loc:{start:{line:46,column:16},end:{line:46,column:42}}}):o)?a:"")+"\r\n            </div>\r\n            <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-link"):a,n))+">\r\n                "+(null!=(a=typeof(o=null!=(o=d(t,"linkExit")||(null!=n?d(n,"linkExit"):n))?o:c)===p?o.call(u,{name:"linkExit",hash:{},data:l,loc:{start:{line:49,column:16},end:{line:49,column:32}}}):o)?a:"")+"\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>"},useData:!0});r=a("4rITg"),M=a("guyfn"),T=a("2E9QK");var te=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="'+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-container"):a,n))+'">\r\n    <div class='+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-change-return"):a,n))+">\r\n        <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"arrow-button-container"):a,n))+">\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"linkProfileChangeReturn")||(null!=n?d(n,"linkProfileChangeReturn"):n))?o:c)===p?o.call(u,{name:"linkProfileChangeReturn",hash:{},data:l,loc:{start:{line:4,column:12},end:{line:4,column:43}}}):o)?a:"")+"\r\n        </div>\r\n\r\n    </div>\r\n    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-container"):a,n))+">\r\n        <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info"):a,n))+">\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"avatarImage")||(null!=n?d(n,"avatarImage"):n))?o:c)===p?o.call(u,{name:"avatarImage",hash:{},data:l,loc:{start:{line:10,column:12},end:{line:10,column:31}}}):o)?a:"")+"\r\n            <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-fields-container"):a,n))+">\r\n                <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field"):a,n))+">\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"labelEmail")||(null!=n?d(n,"labelEmail"):n))?o:c)===p?o.call(u,{name:"labelEmail",hash:{},data:l,loc:{start:{line:13,column:20},end:{line:13,column:38}}}):o)?a:"")+"\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"inputEmail")||(null!=n?d(n,"inputEmail"):n))?o:c)===p?o.call(u,{name:"inputEmail",hash:{},data:l,loc:{start:{line:14,column:20},end:{line:14,column:38}}}):o)?a:"")+"\r\n                </div>\r\n                <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field"):a,n))+">\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"labelLogin")||(null!=n?d(n,"labelLogin"):n))?o:c)===p?o.call(u,{name:"labelLogin",hash:{},data:l,loc:{start:{line:17,column:20},end:{line:17,column:38}}}):o)?a:"")+"\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"inputLogin")||(null!=n?d(n,"inputLogin"):n))?o:c)===p?o.call(u,{name:"inputLogin",hash:{},data:l,loc:{start:{line:18,column:20},end:{line:18,column:38}}}):o)?a:"")+"\r\n                </div>\r\n                <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field"):a,n))+">\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"labelFirstName")||(null!=n?d(n,"labelFirstName"):n))?o:c)===p?o.call(u,{name:"labelFirstName",hash:{},data:l,loc:{start:{line:21,column:20},end:{line:21,column:42}}}):o)?a:"")+"\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"inputFirstName")||(null!=n?d(n,"inputFirstName"):n))?o:c)===p?o.call(u,{name:"inputFirstName",hash:{},data:l,loc:{start:{line:22,column:20},end:{line:22,column:42}}}):o)?a:"")+"\r\n                </div>\r\n                <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field"):a,n))+">\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"labelSecondName")||(null!=n?d(n,"labelSecondName"):n))?o:c)===p?o.call(u,{name:"labelSecondName",hash:{},data:l,loc:{start:{line:25,column:20},end:{line:25,column:43}}}):o)?a:"")+"\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"inputSecondName")||(null!=n?d(n,"inputSecondName"):n))?o:c)===p?o.call(u,{name:"inputSecondName",hash:{},data:l,loc:{start:{line:26,column:20},end:{line:26,column:43}}}):o)?a:"")+"\r\n                </div>\r\n                <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field"):a,n))+">\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"labelDisplayName")||(null!=n?d(n,"labelDisplayName"):n))?o:c)===p?o.call(u,{name:"labelDisplayName",hash:{},data:l,loc:{start:{line:29,column:20},end:{line:29,column:44}}}):o)?a:"")+"\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"inputDisplayName")||(null!=n?d(n,"inputDisplayName"):n))?o:c)===p?o.call(u,{name:"inputDisplayName",hash:{},data:l,loc:{start:{line:30,column:20},end:{line:30,column:44}}}):o)?a:"")+"\r\n                </div>\r\n                <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field"):a,n))+">\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"labelPhone")||(null!=n?d(n,"labelPhone"):n))?o:c)===p?o.call(u,{name:"labelPhone",hash:{},data:l,loc:{start:{line:33,column:20},end:{line:33,column:38}}}):o)?a:"")+"\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"inputPhone")||(null!=n?d(n,"inputPhone"):n))?o:c)===p?o.call(u,{name:"inputPhone",hash:{},data:l,loc:{start:{line:34,column:20},end:{line:34,column:38}}}):o)?a:"")+"\r\n                </div>\r\n            </div>\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"errorMessage")||(null!=n?d(n,"errorMessage"):n))?o:c)===p?o.call(u,{name:"errorMessage",hash:{},data:l,loc:{start:{line:37,column:12},end:{line:37,column:32}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"buttonSave")||(null!=n?d(n,"buttonSave"):n))?o:c)===p?o.call(u,{name:"buttonSave",hash:{},data:l,loc:{start:{line:38,column:12},end:{line:38,column:30}}}):o)?a:"")+"\r\n        </div>\r\n    </div>\r\n</div>"},useData:!0});O=a("6PFVL"),r=a("4rITg"),T=a("2E9QK");var se=n(a("kSwPE")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,s,l){var a,o,r=e.lambda,i=e.escapeExpression,u=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="'+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-container"):a,n))+'">\r\n    <div class='+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-change-password-return"):a,n))+">\r\n        <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"arrow-button-container"):a,n))+">\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"linkProfilePasswordReturn")||(null!=n?d(n,"linkProfilePasswordReturn"):n))?o:c)===p?o.call(u,{name:"linkProfilePasswordReturn",hash:{},data:l,loc:{start:{line:4,column:12},end:{line:4,column:45}}}):o)?a:"")+"\r\n        </div>\r\n\r\n    </div>\r\n    <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-container"):a,n))+">\r\n        <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info"):a,n))+">\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"avatarImage")||(null!=n?d(n,"avatarImage"):n))?o:c)===p?o.call(u,{name:"avatarImage",hash:{},data:l,loc:{start:{line:10,column:12},end:{line:10,column:31}}}):o)?a:"")+"\r\n            <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-fields-container"):a,n))+">\r\n                <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field"):a,n))+">\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"labelOldPassword")||(null!=n?d(n,"labelOldPassword"):n))?o:c)===p?o.call(u,{name:"labelOldPassword",hash:{},data:l,loc:{start:{line:13,column:20},end:{line:13,column:44}}}):o)?a:"")+"\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"inputOldPassword")||(null!=n?d(n,"inputOldPassword"):n))?o:c)===p?o.call(u,{name:"inputOldPassword",hash:{},data:l,loc:{start:{line:14,column:20},end:{line:14,column:44}}}):o)?a:"")+"\r\n                </div>\r\n                <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field"):a,n))+">\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"labelNewPassword")||(null!=n?d(n,"labelNewPassword"):n))?o:c)===p?o.call(u,{name:"labelNewPassword",hash:{},data:l,loc:{start:{line:17,column:20},end:{line:17,column:44}}}):o)?a:"")+"\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"inputNewPassword")||(null!=n?d(n,"inputNewPassword"):n))?o:c)===p?o.call(u,{name:"inputNewPassword",hash:{},data:l,loc:{start:{line:18,column:20},end:{line:18,column:44}}}):o)?a:"")+"\r\n                </div>\r\n                <div class="+i(r(null!=(a=null!=n?d(n,"styles"):n)?d(a,"profile-info-field"):a,n))+">\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"labelNewPassword2")||(null!=n?d(n,"labelNewPassword2"):n))?o:c)===p?o.call(u,{name:"labelNewPassword2",hash:{},data:l,loc:{start:{line:21,column:20},end:{line:21,column:45}}}):o)?a:"")+"\r\n                    "+(null!=(a=typeof(o=null!=(o=d(t,"inputNewPassword2")||(null!=n?d(n,"inputNewPassword2"):n))?o:c)===p?o.call(u,{name:"inputNewPassword2",hash:{},data:l,loc:{start:{line:22,column:20},end:{line:22,column:45}}}):o)?a:"")+"\r\n                </div>\r\n            </div>\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"errorMessage")||(null!=n?d(n,"errorMessage"):n))?o:c)===p?o.call(u,{name:"errorMessage",hash:{},data:l,loc:{start:{line:25,column:12},end:{line:25,column:32}}}):o)?a:"")+"\r\n            "+(null!=(a=typeof(o=null!=(o=d(t,"buttonSave")||(null!=n?d(n,"buttonSave"):n))?o:c)===p?o.call(u,{name:"buttonSave",hash:{},data:l,loc:{start:{line:26,column:12},end:{line:26,column:30}}}):o)?a:"")+"\r\n        </div>\r\n    </div>\r\n</div>"},useData:!0});O=a("6PFVL"),r=a("4rITg"),T=a("2E9QK");var le,ae,oe,re,ie,ue,ce,pe,de,he,me,fe,Ee,ve,ge,ye,be,_e,Ae,Se,Te,Ce,we,Ne,Ie,Pe,ke,De,Oe,xe,Ve,Le,Ue,Fe,Be,$e,Me,Re,He,Ge,je,We,Ke,Je,Qe,ze,qe,Xe,Ze,Ye,en,nn,tn,sn,ln,an,on,rn,un,cn,pn,dn,hn,mn,fn,En,vn,gn,yn,bn,_n,An,Sn,Tn,Cn,wn,Nn,In,Pn,kn,Dn,On,xn,Vn,Ln,Un,Fn,Bn,$n,Mn,Rn,Hn,Gn,jn,Wn,Kn,Jn,Qn,zn,qn,Xn,Zn,Yn,et,nt,tt={};e(tt,"button",(()=>le),(e=>le=e)),e(tt,"button-primary-loading",(()=>ae),(e=>ae=e)),e(tt,"input",(()=>oe),(e=>oe=e)),e(tt,"label",(()=>re),(e=>re=e)),e(tt,"form-label",(()=>ie),(e=>ie=e)),e(tt,"chat-info-container",(()=>ue),(e=>ue=e)),e(tt,"chat-info",(()=>ce),(e=>ce=e)),e(tt,"chat-avatar",(()=>pe),(e=>pe=e)),e(tt,"avatar-image",(()=>de),(e=>de=e)),e(tt,"chat-name",(()=>he),(e=>he=e)),e(tt,"chat-time",(()=>me),(e=>me=e)),e(tt,"chat-last-message",(()=>fe),(e=>fe=e)),e(tt,"chat-unread-count-container",(()=>Ee),(e=>Ee=e)),e(tt,"chat-unread-count",(()=>ve),(e=>ve=e)),e(tt,"link",(()=>ge),(e=>ge=e)),e(tt,"error",(()=>ye),(e=>ye=e)),e(tt,"error-hide",(()=>be),(e=>be=e)),e(tt,"form-login-spacer",(()=>_e),(e=>_e=e)),e(tt,"login-form-button-primary",(()=>Ae),(e=>Ae=e)),e(tt,"login-form-button-secondary",(()=>Se),(e=>Se=e)),e(tt,"form-signup-spacer",(()=>Te),(e=>Te=e)),e(tt,"signup-form-button-primary",(()=>Ce),(e=>Ce=e)),e(tt,"signup-form-button-secondary",(()=>we),(e=>we=e)),e(tt,"chat-container",(()=>Ne),(e=>Ne=e)),e(tt,"chat-left-container",(()=>Ie),(e=>Ie=e)),e(tt,"chat-infos-container",(()=>Pe),(e=>Pe=e)),e(tt,"chat-right-container",(()=>ke),(e=>ke=e)),e(tt,"chat-stub",(()=>De),(e=>De=e)),e(tt,"profile-link-container",(()=>Oe),(e=>Oe=e)),e(tt,"link-profile-open",(()=>xe),(e=>xe=e)),e(tt,"search-container",(()=>Ve),(e=>Ve=e)),e(tt,"search-container-placeholder",(()=>Le),(e=>Le=e)),e(tt,"search-icon",(()=>Ue),(e=>Ue=e)),e(tt,"input-search-box",(()=>Fe),(e=>Fe=e)),e(tt,"add-chat-container",(()=>Be),(e=>Be=e)),e(tt,"link-add-chat",(()=>$e),(e=>$e=e)),e(tt,"conversation-container",(()=>Me),(e=>Me=e)),e(tt,"conversation-header",(()=>Re),(e=>Re=e)),e(tt,"conversation-avatar-container",(()=>He),(e=>He=e)),e(tt,"conversation-avatar-image",(()=>Ge),(e=>Ge=e)),e(tt,"conversation-user-name",(()=>je),(e=>je=e)),e(tt,"conversation-actions-container",(()=>We),(e=>We=e)),e(tt,"actions-button",(()=>Ke),(e=>Ke=e)),e(tt,"conversation-body-container",(()=>Je),(e=>Je=e)),e(tt,"conversation-date",(()=>Qe),(e=>Qe=e)),e(tt,"conversation-other-message",(()=>ze),(e=>ze=e)),e(tt,"conversation-other-message-time",(()=>qe),(e=>qe=e)),e(tt,"conversation-self-message",(()=>Xe),(e=>Xe=e)),e(tt,"conversation-self-message-status",(()=>Ze),(e=>Ze=e)),e(tt,"conversation-self-message-time",(()=>Ye),(e=>Ye=e)),e(tt,"conversation-footer",(()=>en),(e=>en=e)),e(tt,"attach-button-container",(()=>nn),(e=>nn=e)),e(tt,"attach-button",(()=>tn),(e=>tn=e)),e(tt,"conversation-message-box",(()=>sn),(e=>sn=e)),e(tt,"input-conversation-message-box",(()=>ln),(e=>ln=e)),e(tt,"arrow-button-container",(()=>an),(e=>an=e)),e(tt,"arrow-button",(()=>on),(e=>on=e)),e(tt,"send-button",(()=>rn),(e=>rn=e)),e(tt,"profile-container",(()=>un),(e=>un=e)),e(tt,"profile-return",(()=>cn),(e=>cn=e)),e(tt,"profile-return-button",(()=>pn),(e=>pn=e)),e(tt,"profile-info-container",(()=>dn),(e=>dn=e)),e(tt,"profile-info",(()=>hn),(e=>hn=e)),e(tt,"profile-avatar-image",(()=>mn),(e=>mn=e)),e(tt,"profile-avatar-wrapper",(()=>fn),(e=>fn=e)),e(tt,"profile-change-avatar-container",(()=>En),(e=>En=e)),e(tt,"profile-change-avatar-text",(()=>vn),(e=>vn=e)),e(tt,"profile-display-name",(()=>gn),(e=>gn=e)),e(tt,"profile-info-fields-container",(()=>yn),(e=>yn=e)),e(tt,"profile-info-field",(()=>bn),(e=>bn=e)),e(tt,"profile-info-field-name",(()=>_n),(e=>_n=e)),e(tt,"profile-info-field-value",(()=>An),(e=>An=e)),e(tt,"profile-info-link",(()=>Sn),(e=>Sn=e)),e(tt,"profile-info-link-change-info",(()=>Tn),(e=>Tn=e)),e(tt,"profile-info-link-change-password",(()=>Cn),(e=>Cn=e)),e(tt,"profile-info-link-exit",(()=>wn),(e=>wn=e)),e(tt,"form-profile-spacer",(()=>Nn),(e=>Nn=e)),e(tt,"profile-change-return",(()=>In),(e=>In=e)),e(tt,"profile-change-field-value",(()=>Pn),(e=>Pn=e)),e(tt,"profile-change-save-button",(()=>kn),(e=>kn=e)),e(tt,"profile-change-password-return",(()=>Dn),(e=>Dn=e)),e(tt,"profile-change-password-save-button",(()=>On),(e=>On=e)),e(tt,"avatar-modal-header",(()=>xn),(e=>xn=e)),e(tt,"avatar-form",(()=>Vn),(e=>Vn=e)),e(tt,"hidden",(()=>Ln),(e=>Ln=e)),e(tt,"avatar-modal-choose-file-container",(()=>Un),(e=>Un=e)),e(tt,"avatar-modal-file",(()=>Fn),(e=>Fn=e)),e(tt,"avatar-modal-choose-file",(()=>Bn),(e=>Bn=e)),e(tt,"avatar-modal-change-avatar",(()=>$n),(e=>$n=e)),e(tt,"create-chat-form",(()=>Mn),(e=>Mn=e)),e(tt,"create-chat-button",(()=>Rn),(e=>Rn=e)),e(tt,"chat-actions-element",(()=>Hn),(e=>Hn=e)),e(tt,"chat-actions-icon",(()=>Gn),(e=>Gn=e)),e(tt,"add-user-form",(()=>jn),(e=>jn=e)),e(tt,"add-user-button",(()=>Wn),(e=>Wn=e)),e(tt,"delete-user-form",(()=>Kn),(e=>Kn=e)),e(tt,"delete-user-button",(()=>Jn),(e=>Jn=e)),e(tt,"confirm-spacer",(()=>Qn),(e=>Qn=e)),e(tt,"modal-container",(()=>zn),(e=>zn=e)),e(tt,"modal-popup",(()=>qn),(e=>qn=e)),e(tt,"modal-popup-small",(()=>Xn),(e=>Xn=e)),e(tt,"auth-popup",(()=>Zn),(e=>Zn=e)),e(tt,"auth-container",(()=>Yn),(e=>Yn=e)),e(tt,"auth-header",(()=>et),(e=>et=e)),e(tt,"form",(()=>nt),(e=>nt=e)),le="button_28904b",ae="button-primary-loading_28904b",oe="input_28904b",re="label_28904b",ie="form-label_28904b",ue="chat-info-container_28904b",ce="chat-info_28904b",pe="chat-avatar_28904b",de="avatar-image_28904b",he="chat-name_28904b",me="chat-time_28904b",fe="chat-last-message_28904b",Ee="chat-unread-count-container_28904b",ve="chat-unread-count_28904b",ge="link_28904b",ye="error_28904b",be="error-hide_28904b",_e="form-login-spacer_28904b",Ae="login-form-button-primary_28904b",Se="login-form-button-secondary_28904b",Te="form-signup-spacer_28904b",Ce="signup-form-button-primary_28904b",we="signup-form-button-secondary_28904b",Ne="chat-container_28904b",Ie="chat-left-container_28904b",Pe="chat-infos-container_28904b",ke="chat-right-container_28904b",De="chat-stub_28904b",Oe="profile-link-container_28904b",xe="link-profile-open_28904b",Ve="search-container_28904b",Le="search-container-placeholder_28904b",Ue="search-icon_28904b",Fe="input-search-box_28904b",Be="add-chat-container_28904b",$e="link-add-chat_28904b",Me="conversation-container_28904b",Re="conversation-header_28904b",He="conversation-avatar-container_28904b",Ge="conversation-avatar-image_28904b",je="conversation-user-name_28904b",We="conversation-actions-container_28904b",Ke="actions-button_28904b",Je="conversation-body-container_28904b",Qe="conversation-date_28904b",ze="conversation-other-message_28904b",qe="conversation-other-message-time_28904b",Xe="conversation-self-message_28904b",Ze="conversation-self-message-status_28904b",Ye="conversation-self-message-time_28904b",en="conversation-footer_28904b",nn="attach-button-container_28904b",tn="attach-button_28904b",sn="conversation-message-box_28904b",ln="input-conversation-message-box_28904b",an="arrow-button-container_28904b",on="arrow-button_28904b",rn="send-button_28904b",un="profile-container_28904b",cn="profile-return_28904b",pn="profile-return-button_28904b",dn="profile-info-container_28904b",hn="profile-info_28904b",mn="profile-avatar-image_28904b",fn="profile-avatar-wrapper_28904b",En="profile-change-avatar-container_28904b",vn="profile-change-avatar-text_28904b",gn="profile-display-name_28904b",yn="profile-info-fields-container_28904b",bn="profile-info-field_28904b",_n="profile-info-field-name_28904b",An="profile-info-field-value_28904b",Sn="profile-info-link_28904b",Tn="profile-info-link-change-info_28904b",Cn="profile-info-link-change-password_28904b",wn="profile-info-link-exit_28904b",Nn="form-profile-spacer_28904b",In="profile-change-return_28904b",Pn="profile-change-field-value_28904b",kn="profile-change-save-button_28904b",Dn="profile-change-password-return_28904b",On="profile-change-password-save-button_28904b",xn="avatar-modal-header_28904b",Vn="avatar-form_28904b",Ln="hidden_28904b",Un="avatar-modal-choose-file-container_28904b",Fn="avatar-modal-file_28904b",Bn="avatar-modal-choose-file_28904b",$n="avatar-modal-change-avatar_28904b",Mn="create-chat-form_28904b",Rn="create-chat-button_28904b",Hn="chat-actions-element_28904b",Gn="chat-actions-icon_28904b",jn="add-user-form_28904b",Wn="add-user-button_28904b",Kn="delete-user-form_28904b",Jn="delete-user-button_28904b",Qn="confirm-spacer_28904b",zn="modal-container_28904b",qn="modal-popup_28904b",Xn="modal-popup-small_28904b",Zn="auth-popup_28904b",Yn="auth-container_28904b",et="auth-header_28904b",nt="form_28904b";var st;st=a("aWsC9").getBundleURL("3uGGr")+a("bhXxA").resolve("04Yz5");var lt;lt={arrow:a("aWsC9").getBundleURL("3uGGr")+a("bhXxA").resolve("jkKBz"),arrowback:a("aWsC9").getBundleURL("3uGGr")+a("bhXxA").resolve("2t2no"),paperclip:a("aWsC9").getBundleURL("3uGGr")+a("bhXxA").resolve("csFjj"),profilearrow:a("aWsC9").getBundleURL("3uGGr")+a("bhXxA").resolve("1vCHw"),search:a("aWsC9").getBundleURL("3uGGr")+a("bhXxA").resolve("aGWhp"),"status-read":a("aWsC9").getBundleURL("3uGGr")+a("bhXxA").resolve("kkkiR"),threedots:a("aWsC9").getBundleURL("3uGGr")+a("bhXxA").resolve("kc1xZ")};var at;at={favicon:a("aWsC9").getBundleURL("3uGGr")+a("bhXxA").resolve("ljX8R")};M=a("guyfn");class ot{constructor(e,n,t){this._pathname=e,this._blockClass=n,this._props=t}navigate(e){this.match(e)&&(this._pathname=e,this.render())}leave(){this._block&&this._block.hide()}match(e){return e===this._pathname}render(){this._block||(this._block=this._blockClass),(0,M.renderDOM)(this._props.rootQuery,this._block)}}class rt{constructor(e){if(rt.__instance)return rt.__instance;this.routes=[],this.history=window.history,this._rootQuery=e,rt.__instance=this}use(e,n){const t=new ot(e,n,{rootQuery:this._rootQuery});return this.routes.push(t),this}start(){console.log(location.pathname),window.onpopstate=e=>{this._onRoute(e.currentTarget.location.pathname)}}_onRoute(e){const n=this.getRoute(e);n&&(this._currentRoute&&this._currentRoute!==n&&this._currentRoute.leave(),this._currentRoute=n,n.render())}go(e){this.history.pushState({},"",e),this._onRoute(e)}back(){this.history.back()}forward(){this.history.forward()}getRoute(e){return this.routes.find((n=>n.match(e)))}getCurrentRoute(){return this._currentRoute}}T=a("2E9QK");let it;var ut;(ut=it||(it={})).GET="GET",ut.POST="POST",ut.PUT="PUT",ut.DELETE="DELETE";class ct{constructor(e){this._baseurl=e}get(e,n){var t;return n&&n.data&&(e+="?"+(t=n.data,Object.entries(t).map((([e,n])=>encodeURIComponent(e)+"="+encodeURIComponent(n))).join("&")),n.data={}),this.request(this._baseurl+e,{...n,method:it.GET})}post(e,n){return this.request(this._baseurl+e,{...n,method:it.POST})}put(e,n){return this.request(this._baseurl+e,{...n,method:it.PUT})}delete(e,n){return this.request(this._baseurl+e,{...n,method:it.DELETE})}request(e,n={method:it.GET}){const{headers:t={"Content-Type":"application/json"},method:s,data:l}=n;return new Promise(((n,a)=>{const o=new XMLHttpRequest;o.open(s,e),o.withCredentials=!0;let r=!0;if(Object.keys(t).forEach((e=>{"content-type"===e.toLowerCase()&&"multipart/form-data"===t[e].toLowerCase()?r=!1:o.setRequestHeader(e,t[e])})),o.onload=function(){const{status:e}=o;return 200===e||201===e?n(o):a(o)},o.onabort=a,o.onerror=a,o.ontimeout=a,s!==it.GET&&l){const e=r?JSON.stringify(l):l;o.send(e)}else o.send()}))}}class pt{constructor(e){this._API=new ct(e)}async login(e){return(await this._API.post("/auth/signin",{data:e})).responseText}async signup(e){return(await this._API.post("/auth/signup",{data:e})).responseText}async logout(){return(await this._API.post("/auth/logout")).responseText}async getUser(){return await this._API.get("/auth/user")}}class dt{constructor(e){this._API=new ct(e)}async savePassword(e){return(await this._API.put("/user/password",{data:e})).responseText}async saveInfo(e){return(await this._API.put("/user/profile",{data:e})).responseText}async findUser(e){return await this._API.post("/user/search",{data:e})}async changeAvatar(e){return await this._API.put("/user/profile/avatar",{data:e,headers:{"Content-Type":"multipart/form-data"}})}}T=a("2E9QK");class ht{constructor(e){this._API=new ct(e)}async list(){return await this._API.get("/chats")}async create(e){return(await this._API.post("/chats",{data:e})).responseText}async delete(e){return await this._API.delete("/chats",{data:e})}async addUser(e){return await this._API.put("/chats/users",{data:e})}async deleteUser(e){return await this._API.delete("/chats/users",{data:e})}async getToken(e){return await this._API.post(`/chats/token/${e}`)}async getUsers(e){return await this._API.get(`/chats/${e}/users`)}async changeAvatar(e){return await this._API.put("/chats/avatar",{data:e,headers:{"Content-Type":"multipart/form-data"}})}}T=a("2E9QK");T=a("2E9QK");class mt{connect(e){this._socket=new WebSocket(`${C.websocketUrl}/${e.userId}/${e.chatId}/${e.token}`),this._socket.addEventListener("message",(e=>{T.default.instance.EventBus.emit(T.default.EVENTS.MESSAGES_RECEIVED,e.data)})),this._socket.addEventListener("open",(()=>{this.getOld(0),this.ping()})),this._socket.addEventListener("close",(()=>{console.log("Closing socket")}))}send(e){this._socket.send(JSON.stringify(e))}getOld(e){this._socket.send(JSON.stringify({content:e,type:"get old"}))}ping(){this.send({content:"ping",type:"ping"}),setTimeout(this.ping.bind(this),1e4)}}const ft=Object.assign(n(lt),n(at)),Et=new _,vt=new rt("#app"),gt=new(0,T.default),yt=new class{constructor(e){this._router=e,this._authAPI=new pt(C.baseAPIUrl),this._userAPI=new dt(C.baseAPIUrl)}async init(){T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_GETUSER),T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_GETCHATS)}async getUser(){try{const e=await this._authAPI.getUser();T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_GETUSER_SUCCEED,e)}catch(e){T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_GETUSER_FAILED,e)}}async logout(e){try{this._authAPI.logout(),e&&this._router.go(e)}catch(e){console.log("Logout await error",e)}}async login(e,n){const t={login:"",password:""};e.forEach((e=>{const n=e.element;t[n.name]=n.value}));try{await this._authAPI.login(t),this._router.go(n),T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_LOGIN_SUCCEED)}catch(e){T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_LOGIN_FAILED,e)}}async signup(e,n){const t={};e.forEach((e=>{const n=e.element;t[n.name]=n.value}));try{await this._authAPI.signup(t),this._router.go(n),T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_SIGNUP_SUCCEED)}catch(e){T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_SIGNUP_FAILED,e)}}async findUser(e,n){const t={login:""};e.forEach((e=>{const n=e.element;t[n.name]=n.value}));try{const e=await this._userAPI.findUser(t),s=JSON.parse(e.responseText);let l,a=!1;if(s.forEach((e=>{e.login===t.login&&(a=!0,l=e)})),a)T.default.instance.EventBus.emit(n.succeedEvent,l);else{const e=JSON.stringify({reason:"User not found"});T.default.instance.EventBus.emit(n.failedEvent,e)}}catch(e){T.default.instance.EventBus.emit(n.failedEvent,e)}}async saveInfo(e){const n={};e.forEach((e=>{const t=e.element;n[t.name]=t.value}));try{await this._userAPI.saveInfo(n),T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_SAVEINFO_SUCCEED,n)}catch(e){T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_SAVEINFO_FAILED,e)}}async savePassword(e){const n={oldPassword:"",newPassword:""};e.forEach((e=>{const t=e.element;n[t.name]=t.value}));try{await this._userAPI.savePassword(n),T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_SAVEPASSWORD_SUCCEED)}catch(e){T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_SAVEPASSWORD_FAILED,e)}}async changeAvatar(e){try{for(var n of e.keys())console.log(n,e.get(n));const t=await this._userAPI.changeAvatar(e);T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_CHANGEAVATAR_SUCCEED,t)}catch(e){T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_CHANGEAVATAR_FAILED,e)}}}(vt),bt=new class{constructor(){this._chatAPI=new ht(C.baseAPIUrl)}async getChats(){try{const e=await this._chatAPI.list();T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_GETCHATS_SUCCEED,e)}catch(e){console.log("Get chats error: ",e)}}async createChat(e){const n={title:""};e.forEach((e=>{const t=e.element;n[t.name]=t.value}));try{await this._chatAPI.create(n),T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_CREATECHAT_SUCCEED)}catch(e){console.log("Create chat error: ",e)}}async getChatToken(e){try{const n=await this._chatAPI.getToken(e),t=JSON.parse(n.responseText).token;T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_GETCHATTOKEN_SUCCEED,{id:e,token:t})}catch(e){console.log("Get chat token error: ",e)}}async getChatUsers(e){try{const n=await this._chatAPI.getUsers(e),t=JSON.parse(n.responseText);T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_GETCHATUSERS_SUCCEED,{chatId:e,users:t})}catch(e){console.log("Get chat users error: ",e)}}async addChatUser(e){try{await this._chatAPI.addUser({users:[e.userId],chatId:e.chatId}),T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_ADDCHATUSER_SUCCEED)}catch(e){console.log("Add chat user error: ",e)}}async deleteChatUser(e){try{await this._chatAPI.deleteUser({users:[e.userId],chatId:e.chatId}),T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_DELETECHATUSER_SUCCEED)}catch(e){console.log("Delete chat user error: ",e)}}async deleteChat(e){try{await this._chatAPI.delete({chatId:e}),T.default.instance.EventBus.emit(T.default.EVENTS.ACTION_DELETECHAT_SUCCEED)}catch(e){console.log("Delete chat error: ",e)}}},_t=new class{constructor(){this._WSAPI=new mt}connectChat(e){this._WSAPI.connect(e)}sendMessage(e){const n=e[0].element,t={content:n.value?n.value:"",type:"message"};this._WSAPI.send(t)}},At={...{styles:tt,icons:ft,images:n(st)},router:vt},St=new class extends F{constructor(e){super("div",e),this.g.EventBus.on(T.default.EVENTS.VALIDATE_LOGIN_FAILED,this._onValidateLoginFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_LOGIN_FAILED,this._onActionLoginFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_LOGIN_SUCCEED,this._onActionLoginSucceed.bind(this))}_onValidateLoginFailed(e){throw Object.keys(e).forEach((n=>{if(!e[n].isValid){const e=document.querySelector(`input[name=${n}]`);e?.classList.add(this.props.styles["input-error"])}})),new Error("Validation Error")}_onActionLoginSucceed(){this.g.EventBus.emit(T.default.EVENTS.ACTION_GETUSER),this.g.EventBus.emit(T.default.EVENTS.ACTION_GETCHATS)}_onActionLoginFailed(e){const n=JSON.parse(e.responseText).reason;this._errorMessage.setProps({text:n,class:this.props.styles.error}),console.log("Error on login: ",n)}_onFocusChange(e){const n=e.target;L(n).valid?n.classList.remove(this.props.styles["input-error"]):n.classList.add(this.props.styles["input-error"])}render(){const e=new h({type:"text",class:`${this.props.styles.input} ${this.props.styles["input-login"]}`,name:"login",validationType:"login",events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),n=new P({class:`${this.props.styles.error} ${this.props.styles["error-hide"]}`}),t=new h({type:"password",class:`${this.props.styles.input} ${this.props.styles["input-password"]}`,name:"password",validationType:"password",events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),s=new c({text:"Авторизоваться",class:`${this.props.styles.button} ${this.props.styles["login-form-button-primary"]}`,events:{click:n=>{n.preventDefault();const s=[e,t];try{this.g.EventBus.emit(T.default.EVENTS.VALIDATE_LOGIN,s),this.g.EventBus.emit(T.default.EVENTS.ACTION_LOGIN,s,"/messenger")}catch(e){console.log("Error caught",e)}}}}),l=new c({text:"Нет аккаунта?",class:`${this.props.styles.button} ${this.props.styles["login-form-button-secondary"]}`,events:{click:e=>{e.preventDefault(),this.props.router.go("/sign-up")}}}),a=new f({text:"Логин",class:`${this.props.styles.label} ${this.props.styles["form-label"]}`}),i=new f({text:"Пароль",class:`${this.props.styles.label} ${this.props.styles["form-label"]}`});return this._errorMessage=n,(0,r.default)(o,{styles:this.props.styles,buttonLogin:s,buttonSignup:l,labelLogin:a,labelPassword:i,inputLogin:e,inputPassword:t,errorMessage:n})}}(At),Tt=new class extends F{constructor(e){super("div",e),this.g.EventBus.on(T.default.EVENTS.VALIDATE_SIGNUP_FAILED,this._onValidateSignupFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_SIGNUP_FAILED,this._onActionSignupFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_SIGNUP_SUCCEED,this._onActionSignupSucceed.bind(this))}_onValidateSignupFailed(e){throw Object.keys(e).forEach((n=>{if(!e[n].isValid){const e=document.querySelector(`input[name=${n}]`);e?.classList.add(this.props.styles["input-error"])}})),new Error("Validation Error")}_onActionSignupFailed(e){const n=JSON.parse(e.responseText).reason;this._errorMessage.setProps({text:n,class:this.props.styles.error}),console.log("Error on signup: ",n)}_onActionSignupSucceed(){this.g.EventBus.emit(T.default.EVENTS.ACTION_GETUSER),this.g.EventBus.emit(T.default.EVENTS.ACTION_GETCHATS)}_onFocusChange(e){const n=e.target;if(L(n).valid?n.classList.remove(this.props.styles["input-error"]):n.classList.add(this.props.styles["input-error"]),"password2"==n.name){const e=n.form?.elements.password;e&&n.value!==e.value&&n.classList.add(this.props.styles["input-error"])}}render(){const e=new h({type:"text",class:`${this.props.styles.input} ${this.props.styles["input-email"]}`,name:"email",validationType:"email",events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),n=new h({type:"text",class:`${this.props.styles.input} ${this.props.styles["input-login"]}`,name:"login",validationType:"login",events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),t=new h({type:"text",class:`${this.props.styles.input} ${this.props.styles["input-first-name"]}`,name:"first_name",validationType:"name",events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),s=new h({type:"text",class:`${this.props.styles.input} ${this.props.styles["input-second-name"]}`,name:"second_name",validationType:"name",events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),l=new h({type:"text",class:`${this.props.styles.input} ${this.props.styles["input-phone"]}`,name:"phone",validationType:"phone",events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),a=new h({type:"password",class:`${this.props.styles.input} ${this.props.styles["input-password"]}`,name:"password",validationType:"password",events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),o=new h({type:"password",class:`${this.props.styles.input} ${this.props.styles["input-password"]}`,name:"password2",validationType:"password,name=password",events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),i=new P({class:`${this.props.styles.error} ${this.props.styles["error-hide"]}`}),u=new c({text:"Зарегистрироваться",class:`${this.props.styles.button} ${this.props.styles["signup-form-button-primary"]}`,events:{click:r=>{r.preventDefault(),this._errorMessage.setProps({text:"",class:this.props.styles.error});const i=[e,n,t,s,l,a,o];try{this.g.EventBus.emit(T.default.EVENTS.VALIDATE_SIGNUP,i),this.g.EventBus.emit(T.default.EVENTS.ACTION_SIGNUP,i,"/chats")}catch(e){console.log("Error caught",e)}}}}),p=new c({text:"Войти",class:`${this.props.styles.button} ${this.props.styles["signup-form-button-secondary"]}`,events:{click:e=>{e.preventDefault(),this.props.router.go("/")}}}),d=new f({text:"Почта",class:`${this.props.styles.label} ${this.props.styles["form-label"]}`}),m=new f({text:"Логин",class:`${this.props.styles.label} ${this.props.styles["form-label"]}`}),E=new f({text:"Имя",class:`${this.props.styles.label} ${this.props.styles["form-label"]}`}),v=new f({text:"Фамилия",class:`${this.props.styles.label} ${this.props.styles["form-label"]}`}),g=new f({text:"Телефон",class:`${this.props.styles.label} ${this.props.styles["form-label"]}`}),y=new f({text:"Пароль",class:`${this.props.styles.label} ${this.props.styles["form-label"]}`}),b=new f({text:"Пароль (еще раз)",class:`${this.props.styles.label} ${this.props.styles["form-label"]}`});return this._errorMessage=i,(0,r.default)(B,{styles:this.props.styles,labelEmail:d,labelLogin:m,labelFirstName:E,labelSecondName:v,labelPhone:g,labelPassword:y,labelPassword2:b,inputEmail:e,inputLogin:n,inputFirstName:t,inputSecondName:s,inputPhone:l,inputPassword:a,inputPassword2:o,errorMessage:i,buttonLogin:p,buttonSignup:u})}}(At),Ct=new class extends F{constructor(e){super("div",e),this.g.EventBus.on(T.default.EVENTS.ACTION_GETCHATS_SUCCEED,this._onGetChatsSucceed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_GETCHATTOKEN_SUCCEED,this._onGetChatTokenSucceed.bind(this))}_onGetChatTokenSucceed(e){_.instance.addToken({id:e.id,token:e.token}),this.g.EventBus.emit(T.default.EVENTS.ACTION_CONNECTCHAT,{userId:_.instance.getData("id"),chatId:e.id,token:e.token}),this.g.EventBus.emit(T.default.EVENTS.ACTION_GETCHATUSERS,e.id)}_onGetChatsSucceed(e){this._chatInfos=[];JSON.parse(e.responseText).forEach((e=>{let n="";if(e.last_message?.time){const t=new Date(e.last_message.time);n=`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}const t=e.last_message?.content?e.last_message.content:"";let s=this.props.icons.user;e.avatar&&(s=C.resourceUrl+e.avatar),this._chatInfos.push(new v({title:e.title,avatar:s,text:t,imagesAlt:`Чат ${e.title}`,unread_count:e.unread_count,time:n,styles:this.props.styles,events:{click:()=>{try{const n={chatId:e.id,...this.props},t=new ee(n);this.g.EventBus.emit(T.default.EVENTS.ACTION_GETCHATTOKEN,e.id),(0,M.renderDOM)("#conversation",t)}catch(e){console.log(e)}}}}))})),this.setProps({chatInfos:this._chatInfos})}_onFocusChange(e){const n=e.target;L(n).valid?n.classList.remove(this.props.styles["input-error"]):n.classList.contains(this.props.styles["input-error"])||n.classList.add(this.props.styles["input-error"])}render(){const e=[];this._chatInfos=e;const n=new y({text:"Профиль ",class:this.props.styles["link-profile-open"],imageAfterSrc:this.props.icons.profilearrow,imagesAlt:"Профиль",events:{click:()=>{this.props.router.go("/settings")}}}),t=new y({text:"+",class:this.props.styles["add-chat-container"],events:{click:()=>{const e=new j({styles:this.props.styles});(0,M.renderDOM)("#modal",e)}}}),s=new h({type:"text",class:`${this.props.styles.input} ${this.props.styles["input-search-box"]}`,name:"search",placeholder:" ",events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}});return(0,r.default)($,{chatInfos:e,linkProfileOpen:n,linkAddChat:t,inputSearch:s,...this.props})}}(At),wt=new class extends F{constructor(e){super("div",e),this.g.EventBus.on(T.default.EVENTS.USERDATA_UPDATED,this._onUserDataUpdated.bind(this))}_onUserDataUpdated(e){this.setProps({user:e.getData()})}render(){const e=new N({...this.props,imagesAlt:"Аватар",events:{click:()=>{(0,M.renderDOM)("#modal",new H(this.props))}}}),n=new y({class:this.props.styles["arrow-button"],imageBeforeClass:this.props.styles["profile-return-button"],imageBeforeSrc:this.props.icons.arrowback,imagesAlt:"Назад",events:{click:()=>{this.props.router.go("/messenger")}}}),t=new y({class:`${this.props.styles.link} ${this.props.styles["profile-info-link-change-info"]}`,text:"Изменить данные",imagesAlt:"Изменить данные",events:{click:()=>{this.props.router.go("/settings-change")}}}),s=new y({class:`${this.props.styles.link} ${this.props.styles["profile-info-link-change-password"]}`,text:"Изменить пароль",imagesAlt:"Изменить пароль",events:{click:()=>{this.props.router.go("/settings-password")}}}),l=new y({class:`${this.props.styles.link} ${this.props.styles["profile-info-link-exit"]}`,text:"Выйти",imagesAlt:"Выйти",events:{click:()=>{this.g.EventBus.emit(T.default.EVENTS.ACTION_LOGOUT,"/")}}});return(0,r.default)(ne,{changeAvatar:e,linkProfileReturn:n,linkChangeInfo:t,linkChangePassword:s,linkExit:l,...this.props})}}(At),Nt=new class extends F{constructor(e){super("div",e),this.g.EventBus.on(T.default.EVENTS.VALIDATE_SAVEINFO_FAILED,this._onValidateSaveInfoFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_SAVEINFO_FAILED,this._onActionSaveInfoFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_SAVEINFO_SUCCEED,this._onActionSaveInfoSucceed.bind(this)),this.g.EventBus.on(T.default.EVENTS.USERDATA_UPDATED,this._onUserDataUpdated.bind(this))}_onUserDataUpdated(e){this.setProps({user:e.getData()})}_onValidateSaveInfoFailed(e){throw Object.keys(e).forEach((n=>{if(!e[n].isValid){const e=document.querySelector(`input[name=${n}]`);e?.classList.add(this.props.styles["input-error"]),e?.previousElementSibling?.classList.add(this.props.styles["input-error"])}})),new Error("Validation Error")}_onActionSaveInfoFailed(e){const n=JSON.parse(e.responseText).reason;this._errorMessage.setProps({text:n,class:this.props.styles.error})}_onActionSaveInfoSucceed(e){const n=_.instance;n.setData(e),this.g.EventBus.emit(T.default.EVENTS.USERDATA_UPDATED,n),this._errorMessage.setProps({text:"Info saved",class:this.props.styles.error})}_onFocusChange(e){const n=e.target,t=L(n);if(t.valid){n.classList.remove(this.props.styles["input-error"]),n.previousElementSibling?.classList.remove(this.props.styles["input-error"]);const e=n.nextElementSibling;e&&e.parentNode&&e instanceof O.ErrorInput&&e.parentNode.removeChild(e)}else{n.classList.add(this.props.styles["input-error"]),n.previousElementSibling?.classList.add(this.props.styles["input-error"]);const e=n.nextElementSibling;e&&e.parentNode&&e instanceof O.ErrorInput&&e.parentNode.removeChild(e);const s=new(0,O.ErrorInput)({text:t.reason,class:this.props.styles["input-error"]});n.insertAdjacentElement("afterend",s.getContent())}}render(){const e=_.instance.getData("avatar")?C.resourceUrl+_.instance.getData("avatar"):this.props.icons.user,n=new w({class:this.props.styles["profile-avatar-image"],src:e}),t=new h({type:"text",class:`${this.props.styles.input} ${this.props.styles["profile-change-field-value"]}`,name:"email",validationType:"email",value:this.props.user?.email,events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),s=new h({type:"text",class:`${this.props.styles.input} ${this.props.styles["profile-change-field-value"]}`,name:"login",validationType:"login",value:this.props.user?.login,events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),l=new h({type:"text",class:`${this.props.styles.input} ${this.props.styles["profile-change-field-value"]}`,name:"first_name",validationType:"name",value:this.props.user?.first_name,events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),a=new h({type:"text",class:`${this.props.styles.input} ${this.props.styles["profile-change-field-value"]}`,name:"second_name",validationType:"name",value:this.props.user?.second_name,events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),o=new h({type:"text",class:`${this.props.styles.input} ${this.props.styles["profile-change-field-value"]}`,name:"display_name",validationType:"name",value:this.props.user?.display_name,events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),i=new h({type:"text",class:`${this.props.styles.input} ${this.props.styles["profile-change-field-value"]}`,name:"phone",validationType:"phone",value:this.props.user?.phone,events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),u=new y({class:this.props.styles["arrow-button"],imageBeforeClass:this.props.styles["profile-return-button"],imageBeforeSrc:this.props.icons.arrowback,events:{click:()=>{this._errorMessage.setProps({text:"",class:`${this.props.styles.error} ${this.props.styles["error-hide"]}`}),this.props.router.go("/settings")}}}),p=new P({class:`${this.props.styles.error} ${this.props.styles["error-hide"]}`}),d=new c({text:"Сохранить",class:`${this.props.styles.button} ${this.props.styles["profile-change-save-button"]}`,events:{click:e=>{e.preventDefault();const n=[t,s,l,a,i,o];try{this.g.EventBus.emit(T.default.EVENTS.VALIDATE_SAVEINFO,n),this.g.EventBus.emit(T.default.EVENTS.ACTION_SAVEINFO,n)}catch(e){console.log("Error caught",e)}}}}),m=new f({text:"Почта",class:this.props.styles["profile-info-field-name"]}),E=new f({text:"Логин",class:this.props.styles["profile-info-field-name"]}),v=new f({text:"Имя",class:this.props.styles["profile-info-field-name"]}),g=new f({text:"Фамилия",class:this.props.styles["profile-info-field-name"]}),b=new f({text:"Имя в чате",class:this.props.styles["profile-info-field-name"]}),A=new f({text:"Телефон",class:this.props.styles["profile-info-field-name"]});return this._errorMessage=p,(0,r.default)(te,{styles:this.props.styles,images:this.props.images,avatarImage:n,labelEmail:m,labelLogin:E,labelFirstName:v,labelSecondName:g,labelDisplayName:b,labelPhone:A,inputEmail:t,inputLogin:s,inputFirstName:l,inputSecondName:a,inputDisplayName:o,inputPhone:i,linkProfileChangeReturn:u,errorMessage:p,buttonSave:d})}}(At),It=new class extends F{constructor(e){super("div",e),this.g.EventBus.on(T.default.EVENTS.VALIDATE_SAVEPASSWORD_FAILED,this._onValidateSavePasswordFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_SAVEPASSWORD_FAILED,this._onActionSavePasswordFailed.bind(this)),this.g.EventBus.on(T.default.EVENTS.ACTION_SAVEPASSWORD_SUCCEED,this._onActionSavePasswordSucceed.bind(this)),this.g.EventBus.on(T.default.EVENTS.USERDATA_UPDATED,this._onUserDataUpdated.bind(this))}_onUserDataUpdated(e){this.setProps({user:e.getData()})}_onValidateSavePasswordFailed(e){throw Object.keys(e).forEach((n=>{if(!e[n].isValid){const e=document.querySelector(`input[name=${n}]`);e?.classList.add(this.props.styles["input-error"]),e?.previousElementSibling?.classList.add(this.props.styles["input-error"])}})),new Error("Validation Error")}_onActionSavePasswordFailed(e){const n=JSON.parse(e.responseText).reason;this._errorMessage.setProps({text:n,class:this.props.styles.error})}_onActionSavePasswordSucceed(){this._errorMessage.setProps({text:"Password saved",class:this.props.styles.error})}_onFocusChange(e){const n=e.target,t=L(n);if(t.valid){n.classList.remove(this.props.styles["input-error"]),n.previousElementSibling?.classList.remove(this.props.styles["input-error"]);const e=n.nextElementSibling;e&&e.parentNode&&e instanceof O.ErrorInput&&e.parentNode.removeChild(e)}else{n.classList.add(this.props.styles["input-error"]),n.previousElementSibling?.classList.add(this.props.styles["input-error"]);const e=n.nextElementSibling;e&&e.parentNode&&e instanceof O.ErrorInput&&e.parentNode.removeChild(e);const s=new(0,O.ErrorInput)({text:t.reason,class:this.props.styles["input-error"]});n.insertAdjacentElement("afterend",s.getContent())}if("newPassword2"==n.name){const e=n.form?.elements.newPassword;e&&n.value!==e.value&&(n.classList.add(this.props.styles["input-error"]),n.previousElementSibling?.classList.remove(this.props.styles["input-error"]))}}render(){const e=_.instance.getData("avatar")?C.resourceUrl+_.instance.getData("avatar"):this.props.icons.user,n=new w({class:this.props.styles["profile-avatar-image"],src:e}),t=new h({type:"password",class:`${this.props.styles.input} ${this.props.styles["profile-change-field-value"]}`,name:"oldPassword",validationType:"password",events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),s=new h({type:"password",class:`${this.props.styles.input} ${this.props.styles["profile-change-field-value"]}`,name:"newPassword",validationType:"password",events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),l=new h({type:"password",class:`${this.props.styles.input} ${this.props.styles["profile-change-field-value"]}`,name:"newPassword2",validationType:"password",events:{blur:this._onFocusChange.bind(this),focus:this._onFocusChange.bind(this)}}),a=new y({class:this.props.styles["arrow-button"],imageBeforeClass:this.props.styles["profile-return-button"],imageBeforeSrc:this.props.icons.arrowback,events:{click:()=>{this._errorMessage.setProps({text:"",class:`${this.props.styles.error} ${this.props.styles["error-hide"]}`}),this.props.router.go("/settings")}}}),o=new P({class:`${this.props.styles.error} ${this.props.styles["error-hide"]}`}),i=[t,s,l],u=new c({text:"Сохранить",class:`${this.props.styles.button} ${this.props.styles["profile-change-password-save-button"]}`,events:{click:e=>{e.preventDefault(),this._errorMessage.setProps({class:`${this.props.styles.error} ${this.props.styles["error-hide"]}`});try{this.g.EventBus.emit(T.default.EVENTS.VALIDATE_SAVEPASSWORD,i),this.g.EventBus.emit(T.default.EVENTS.ACTION_SAVEPASSWORD,i)}catch(e){console.log("Error caught",e)}}}}),p=new f({text:"Старый пароль",class:this.props.styles["profile-info-field-name"]}),d=new f({text:"Новый пароль",class:this.props.styles["profile-info-field-name"]}),m=new f({text:"Повторите новый пароль",class:this.props.styles["profile-info-field-name"]});return this._errorMessage=o,(0,r.default)(se,{styles:this.props.styles,images:this.props.images,avatarImage:n,labelOldPassword:p,labelNewPassword:d,labelNewPassword2:m,inputOldPassword:t,inputNewPassword:s,inputNewPassword2:l,linkProfilePasswordReturn:a,errorMessage:o,buttonSave:u})}}(At);gt.EventBus.on(T.default.EVENTS.ACTION_INIT,yt.init.bind(yt)),gt.EventBus.on(T.default.EVENTS.ACTION_GETUSER,yt.getUser.bind(yt)),gt.EventBus.on(T.default.EVENTS.ACTION_GETUSER_SUCCEED,(function(e){const n=JSON.parse(e.responseText);Et.setData(n),gt.EventBus.emit(T.default.EVENTS.USERDATA_UPDATED,Et),vt.go("/"===window.location.pathname?"/messenger":window.location.pathname)})),gt.EventBus.on(T.default.EVENTS.ACTION_GETUSER_FAILED,(function(){vt.go("/sign-up"===window.location.pathname?"/sign-up":"/")})),gt.EventBus.on(T.default.EVENTS.VALIDATE_LOGIN,(function(e){const[n,t]=U(e);n||T.default.instance.EventBus.emit(T.default.EVENTS.VALIDATE_LOGIN_FAILED,t)})),gt.EventBus.on(T.default.EVENTS.ACTION_LOGIN,yt.login.bind(yt)),gt.EventBus.on(T.default.EVENTS.ACTION_LOGIN_SUCCEED,bt.getChats.bind(bt)),gt.EventBus.on(T.default.EVENTS.VALIDATE_SIGNUP,(function(e){const[n,t]=U(e);n||T.default.instance.EventBus.emit(T.default.EVENTS.VALIDATE_SIGNUP_FAILED,t)})),gt.EventBus.on(T.default.EVENTS.ACTION_SIGNUP,yt.signup.bind(yt)),gt.EventBus.on(T.default.EVENTS.VALIDATE_SAVEINFO,(function(e){const[n,t]=U(e);n||T.default.instance.EventBus.emit(T.default.EVENTS.VALIDATE_SAVEINFO_FAILED,t)})),gt.EventBus.on(T.default.EVENTS.ACTION_SAVEINFO,yt.saveInfo.bind(yt)),gt.EventBus.on(T.default.EVENTS.VALIDATE_SAVEPASSWORD,(function(e){const[n,t]=U(e);n||T.default.instance.EventBus.emit(T.default.EVENTS.VALIDATE_SAVEPASSWORD_FAILED,t)})),gt.EventBus.on(T.default.EVENTS.ACTION_SAVEPASSWORD,yt.savePassword.bind(yt)),gt.EventBus.on(T.default.EVENTS.ACTION_LOGOUT,yt.logout.bind(yt)),gt.EventBus.on(T.default.EVENTS.ACTION_CHANGEAVATAR,yt.changeAvatar.bind(yt)),gt.EventBus.on(T.default.EVENTS.VALIDATE_SENDMESSAGE,(function(e){const[n,t]=U(e);n||T.default.instance.EventBus.emit(T.default.EVENTS.VALIDATE_SENDMESSAGE_FAILED,t)})),gt.EventBus.on(T.default.EVENTS.ACTION_SENDMESSAGE,_t.sendMessage.bind(_t)),gt.EventBus.on(T.default.EVENTS.VALIDATE_ADDCHATUSER,(function(e){const[n,t]=U(e);n||T.default.instance.EventBus.emit(T.default.EVENTS.VALIDATE_ADDCHATUSER_FAILED,t)})),gt.EventBus.on(T.default.EVENTS.ACTION_ADDCHATUSER,bt.addChatUser.bind(bt)),gt.EventBus.on(T.default.EVENTS.ACTION_FINDUSER,yt.findUser.bind(yt)),gt.EventBus.on(T.default.EVENTS.VALIDATE_DELETECHATUSER,(function(e){const[n,t]=U(e);n||T.default.instance.EventBus.emit(T.default.EVENTS.VALIDATE_DELETECHATUSER_FAILED,t)})),gt.EventBus.on(T.default.EVENTS.ACTION_DELETECHATUSER,bt.deleteChatUser.bind(bt)),gt.EventBus.on(T.default.EVENTS.ACTION_DELETECHAT,bt.deleteChat.bind(bt)),gt.EventBus.on(T.default.EVENTS.ACTION_GETCHATS,bt.getChats.bind(bt)),gt.EventBus.on(T.default.EVENTS.ACTION_GETCHATTOKEN,bt.getChatToken.bind(bt)),gt.EventBus.on(T.default.EVENTS.ACTION_GETCHATUSERS,bt.getChatUsers.bind(bt)),gt.EventBus.on(T.default.EVENTS.VALIDATE_CREATECHAT,(function(e){const[n,t]=U(e);n||T.default.instance.EventBus.emit(T.default.EVENTS.VALIDATE_CREATECHAT_FAILED,t)})),gt.EventBus.on(T.default.EVENTS.ACTION_CREATECHAT,bt.createChat.bind(bt)),gt.EventBus.on(T.default.EVENTS.ACTION_CONNECTCHAT,_t.connectChat.bind(_t)),vt.use("/",St).use("/sign-up",Tt).use("/messenger",Ct).use("/settings",wt).use("/settings-change",Nt).use("/settings-password",It).start(),gt.EventBus.emit(T.default.EVENTS.ACTION_INIT);
//# sourceMappingURL=index.5a0ce1df.js.map
